{"version":3,"sources":["modules/error.ts","modules/http.ts","modules/snapshot/index.ts","interfaces.ts","utils.ts","modules/hero/data.ts","modules/hero/index.ts","modules/hero/sorters.ts","modules/equip/sorters.ts","modules/equip/data.ts","modules/equip/attr.ts","modules/equip/score.ts","modules/equip/index.ts","components/Common/Star.tsx","store.ts","components/Snapshot/SnapshotInfo.tsx","components/Overview/OverviewPage.tsx","components/Common/SubNav.tsx","components/Hero/HeroIcon.tsx","constants.ts","components/Hero/HeroGrid.tsx","components/Common/Rarity.tsx","components/Common/Rating.tsx","components/Equip/EquipIcon.tsx","components/Equip/EquipDetail.tsx","components/Equip/EquipItem.tsx","components/Equip/EquipSet.tsx","components/Equip/Equips.tsx","components/Hero/HeroDetail.tsx","components/Hero/HeroDetailOverlay.tsx","hooks/debounce.ts","components/Hero/HeroList.tsx","modules/shard/index.ts","components/Hero/Shard/ShardPage.tsx","modules/skill/data.ts","components/Hero/Skill/SkillPage.tsx","modules/story/data.ts","modules/story/index.ts","components/Hero/Story/StoryPage.tsx","components/Hero/HeroPage.tsx","components/Equip/EquipGrid.tsx","components/Equip/EquipTypeSelector.tsx","components/Equip/EquipPosition.tsx","modules/equip/export.ts","modules/equip/ocr2.ts","components/Equip/EquipList.tsx","components/Equip/EquipSetAttrs.tsx","components/Equip/EquipPage.tsx","components/Equip/EquipPresets.tsx","modules/realm_card/data.ts","modules/realm_card/index.ts","components/RealmCard/RealmCardPage.tsx","components/Update/UpdateInfo.tsx","components/About/About.tsx","components/Main/Main.tsx","modules/cbg/index.ts","components/Snapshot/OpenCbgUrl.tsx","components/Snapshot/SnapshotSelectScreen.tsx","components/App.tsx","serviceWorker.ts","index.tsx","assets/logo.svg"],"names":["ActionType","initialState","currentError","ErrorActions","error","type","SetError","payload","HttpClient","axios","create","interceptors","response","use","res","err","data","message","Error","concat","status","extractError","YyxStore","dispatch","Promise","reject","currentNotSelected","current","Ratings","HeroRarity","HeroEquipAttrType","SnapshotSelectors","state","snapshot","SnapshotService","select","_select","Object","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","abrupt","put","stop","this","_x","apply","arguments","SnapshotActions","file","_ref","_callee2","_context2","loadCurrent","_x2","resetCurrent","SetCurrent","_ref2","_callee3","_context3","t0","t1","get","then","t2","sent","t3","_x3","AttrValueType","combineSorters","_len","length","sorters","Array","_key","b","_i","r","sorter","combineFilters","_len2","filters","_key2","v","_i2","filter","sortDesc","formatAttrValue","undefined","Float","toFixed","Percentage","Math","round","DATE_FORMAT","formatTimestamp","moment","Date","setTime","local","format","getTimestampFromObjectId","id","parseInt","substring","formatDate","date","parseDate","str","locale","toDate","computeOnce","f","value","DATA","require","mapAttrRating","list","attack","max_hp","defense","speed","crit_rate","ALL_HERO_DATA","map","i","name","attr_rating","unawake","awake","rarity","skills","awake_skill","DataMap","reduce","m","set","Map","RarityRank","SP","SSR","SR","R","N","reverse","getHeroData","heroId","defaultSorter","star","level","hero_id","listOptions","HeroActions","opts","SetListOptions","materialRarityFilter","hero","includes","selectAll","heroes","timestamp_from_id","selectMapById","createSelector","selectAllSorted","slice","sort","selectMapByHeroId","push","FORCE_FOLD_HERO_IDS","selectAllFolded","skipped","groups","lock","nick_name","group","item","find","gi","folded","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","values","Symbol","iterator","done","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","vi","return","selectListOptions","createTermFilter","term","trim","heroIds","selectList","sorted","toConsumableArray","fold","HeroSelectors","selectCount","l","quality","suit_id","ALL_SUIT_DATA","getEquipSuiteData","AttrNames","_AttrNames","defineProperty","Hp","Defense","Attack","HpRate","DefenseRate","AttackRate","Speed","CritRate","CritPower","EffectHitRate","EffectResistRate","PercentageAttrs","HeroEquipPosAttrBaseTypes","formatEquipAttrValue","plus","formatEquipAttr","getEquipAttrName","getEquipRandomAttrValue","equip","random_attr_map","random_attrs","attr","round2","AttrValueRounders","SCORE_DATA","match","attrs","_ref3","slicedToArray","reqType","reqValue","getEquipScoreData","score","EquipActions","EquipLevelFilter","EquipEquippedFilter","selectEquippedByMap","equippedByMap","h","equips","selectPresets","hero_equip_presets","selectIncludedInPresetsMap","presets","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","p","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","items","equippedBy","inPresets","hero_equips","suit_data","equipped_by","included_in_presets","selectMaps","idMap","qualityMap","levelMap","suitMap","posMap","baseAttrMap","selector","key","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","e","pos","base_attr","suit","StarType","selectDisplay","types","positions","stars","baseAttrs","Any","Zero","equipped","Equipped","trashed","garbage","scores","scoreData","creationTimeFrom","t","getTime","creationTimeTo","EquipSelectors","selectPresetItems","maps","objectSpread","suitCount","attrMap","suits","clear","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","single_attrs","c","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","entries","suitId","count","effect","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","console","warn","computeEquipSetInfo","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","combineReducers","action","applyMiddleware","thunk","SnapshotInfo","connect","notSelected","stateProps","dispatchProps","ownProps","render","props","info","_info$data","player","currency","react_default","createElement","className","version","cbg_url","target","href","timestamp","coin","jade","action_point","auto_point","honor","medal","contrib","totem_pass","s_jade","skin_token","realm_raid_pass","handleLinkClick","route","link","preventDefault","history","to","SubNav","withRouter","path","location","pathname","menu","large","links","menuItem","active","text","label","onClick","renderStar","classNames","Elements","_Elements","Orange","Purple","Blue","orangeElems","purpleElems","blueElems","ii","Grey","Stars","getStarType","HeroIcon","toLowerCase","childHeros","onClickHero","src","Star_Stars","HeroDataIcon","HeroGrid","idx","HeroIcon_HeroIcon","ClassNames","_ClassNames","Rarity","Rating","rating","EquipIcon","EquipIcon_EquipTypeIcon","EquipTypeIcon","_ref$size","size","width","height","EquipDetail","_formatEquipAttr","_formatEquipAttr2","baseAttrName","baseAttrValue","EquipIcon_EquipIcon","Fragment","_formatEquipAttr3","_formatEquipAttr4","_formatEquipAttr5","_formatEquipAttr6","EquipItem","popover","content","EquipDetail_EquipDetail","minimal","popoverClassName","Classes","POPOVER_CONTENT_SIZING","portalClassName","onClickEquip","EquipSet","_useState","useState","_useState2","setItems","useEffect","fill","EquipItem_EquipItem","Equips","ids","HeroDetail","ratings","Rarity_Rarity","style","flex","renderIconName","Rating_Rating","base","crit_power","effect_hit_rate","effect_resist_rate","renderAttrs","EquipSet_EquipSet","HeroDetailOverlay","contentEl","useRef","overlay","backdropClassName","isOpen","onClose","classList","add","ref","HeroDetail_HeroDetail","useDebounce","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","RaritySelect","Select","ofType","RarityOptions","getRarityElem","option","renderRarityOption","params","handleClick","modifiers","StarSelect","StarOptions","renderStarOption","HeroList","mapById","activeHero","setActiveHero","_useState3","_useState4","setFold","_useState5","_useState6","setRarity","_useState7","_useState8","setStar","_useState9","_useState10","setTerm","debouncedTerm","HeroDetailOverlay_HeroDetailOverlay","card","inputGroup","leftIcon","placeholder","onChange","filterable","itemRenderer","onItemSelect","buttons","controls","checked","HeroGrid_HeroGrid","log","hero_book_shards","hero_data","getRarityRank","s","ShardSelectors","selectSorted","shards","books","ShardPage","justifyContent","book_max_shards","getSkillMaxLevelMap","SKILL_LEVEL_DATA","getDataList","SkillMaxLevelMap","all_skills","skill_max_levels","SkillPage","heroesMap","HeroIcon_HeroDataIcon","numbers","skill","max","color","formatUpgrade","getStoryTaskMap","tasks","StorySelectors","selectProgressMap","story_tasks","progress","max_value","TaskMap","formatProgress","SubPages","component","progressMap","useSelector","React","useMemo","taskStatus","cond_var","max_v","taskTotal","taskDone","vTotal","vDone","_progressMap$get","_progressMap$get2","EquipGrid","EquipTypeDialog","dialog","onCancel","DIALOG_BODY","selected","setIdSelected","tag","attr2","getEquipSuitAttrName","icon","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","intent","Intent","PRIMARY","onOk","EmptyList","EquipTypeMultiSelector","dialogOpen","setDialogOpen","dialogSelected","setDialogSelected","setSelected","EquipTypeSelector_EquipTypeDialog","multiple","idSelected","Labels","EquipPosition","position","labelElement","exportJson","filename","post","AttrNameMap","SuitMap","String","equipsToOcr2","御魂ID","御魂等级","御魂星级","御魂类型","位置","_arr","keys","forEach","k","renderBaseAttrs","disabled","alignText","from","Set","getBaseAttrList","buttonGroup","DefaultListOptions","Max","exportOcr2Json","snapshotInfo","EquipList","options","_setOptions","debouncedOptions","loading","setLoading","exporting","setExporting","exported","setExported","setOptions","divider","EquipTypeSelector_EquipTypeMultiSelector","nodes","_loop","EquipPosition_EquipPosition","renderPositions","_loop2","renderStars","NotEquipped","dateInput","showActionsBar","timePrecision","callout","EquipGrid_EquipGrid","AttrTable","EquipSetAttrs","suites","setSuites","termDebounced","setList","filteredList","some","every","EquipSetAttrs_EquipSetAttrs","RealmCardNames","realm_cards","itemId","item_id","selectGroupMapByName","cards","entry","RealmCardSelectors","selectGroups","RealmCardPage","columns","rows","g","os","family","Markdown","MyTargets","R_FILENAME","ReleaseInfo","release","tag_name","source","body","assets","browser_download_url","asset","parts","_parts","product","myTarget","productName","replace","getAssetElement","UpdateInfo","latest","setLatest","setError","race","pkg","draft","prerelease","spinner","defaultIsOpen","UpdateInfo_ReleaseInfo","About","logo","routes","renderLabel","show","_","SubNav_SubNav","page","react_router","exact","LayoutImpl","exportUrl","ts","floor","encodeURIComponent","server_id","navbar","navbarGroup","align","Alignment","LEFT","navbarDivider","startsWith","RIGHT","UpdateInfo_UpdateInfo","About_About_About","Main","react_router_dom","pullCbg","url","SnapshopPreview","HEADING","listing_info","player_name","server_name","TEXT_MUTED","player_level","Colors","RED1","sign","parseFloat","formatCurrency","price","OpenCbgUrl","open","useDispatch","_React$useState","_React$useState2","setUrl","_React$useState3","_React$useState4","setSnapshot","_React$useState5","_React$useState6","_React$useState7","_React$useState8","onPull","_snapshot","onOpen","load","title","TEXT_SMALL","textArea","FILL","growVertically","preview","OpenCbgUrl_SnapshopPreview","SnapshotSelectScreen","openCbg","setOpenCbg","fileInput","onInputChange","files","catch","OpenCbgUrl_OpenCbgUrl","App","main","Main_Main_Main","SnapshotSelectScreen_SnapshotSelectScreen","marginTop","Boolean","hostname","container","document","getElementById","ReactDOM","es","store","components_App","navigator","serviceWorker","ready","registration","unregister","module","exports","__webpack_require__"],"mappings":"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","file":"static/js/main.bb43f7fb.chunk.js","sourcesContent":["import { IAction } from \"../store\";\n\nexport interface IState {\n  currentError: Error | null;\n}\n\nconst initialState: IState = {\n  currentError: null\n};\n\nexport enum ActionType {\n  SetError = \"ERROR_SET_ERROR\"\n}\n\nexport function reducer(state = initialState, action: IAction<ActionType>) {\n  const { type, payload } = action;\n  switch (type) {\n    case ActionType.SetError:\n      return {\n        ...state,\n        currentError: payload\n      };\n  }\n  return state;\n}\n\nexport const ErrorActions = {\n  setError(error: Error) {\n    return {\n      type: ActionType.SetError,\n      payload: error\n    };\n  },\n  clearError() {\n    return {\n      type: ActionType.SetError,\n      payload: null\n    };\n  }\n};\n","import axios, { AxiosResponse } from \"axios\";\nimport { YyxStore } from \"../store\";\nimport { ErrorActions } from \"./error\";\n\nexport const HttpClient = axios.create();\n\nHttpClient.interceptors.response.use(\n  res => res,\n  err => {\n    const error = err.response ? extractError(err.response) : err;\n    YyxStore.dispatch(ErrorActions.setError(error));\n    return Promise.reject(error);\n  }\n);\n\nfunction extractError(res: AxiosResponse) {\n  if (res.data && res.data.message) {\n    return new Error(res.data.message);\n  }\n  return new Error(`未知错误 (HTTP ${res.status})`);\n}\n","import { IAction, IDispatch, IYyxState } from \"../../store\";\nimport { HttpClient } from \"../http\";\nimport { ISnapshot } from \"../../interfaces\";\nimport { HeroActions } from \"../hero\";\n\nexport interface IState {\n  currentNotSelected: boolean;\n  current: ISnapshot | null;\n}\n\nconst initialState: IState = {\n  currentNotSelected: false,\n  current: null\n};\n\nexport enum ActionType {\n  SetCurrent = \"SNAPSHOT_SET_CURRENT\"\n}\n\nexport function reducer(state = initialState, action: IAction<ActionType>) {\n  const { type, payload } = action;\n  switch (type) {\n    case ActionType.SetCurrent:\n      return {\n        ...state,\n        currentNotSelected: !payload,\n        current: payload\n      };\n  }\n  return state;\n}\n\nconst selectCurrentSnapshot = (state: IYyxState) =>\n  state.snapshot && state.snapshot.current;\n\nexport const $isCbgSnapshot = (state: IYyxState) =>\n  state.snapshot && state.snapshot.current && !!state.snapshot.current.cbg_url;\n\nexport const SnapshotSelectors = {\n  selectCurrentSnapshot\n};\n\nexport const SnapshotService = {\n  select: async (snapshot: ISnapshot | File) => {\n    return HttpClient.put(\"/api/snapshot\", snapshot);\n  }\n};\n\nexport const SnapshotActions = {\n  select(file: File | ISnapshot) {\n    return async (dispatch: IDispatch<ActionType>) => {\n      await SnapshotService.select(file);\n      return dispatch(SnapshotActions.loadCurrent());\n    };\n  },\n  resetCurrent() {\n    return (dispatch: IDispatch) => {\n      dispatch({\n        type: ActionType.SetCurrent,\n        payload: null\n      });\n    };\n  },\n  loadCurrent() {\n    return async (dispatch: IDispatch<ActionType>) => {\n      dispatch({\n        type: ActionType.SetCurrent,\n        payload: await HttpClient.get(\"/api/snapshot\").then(res => res.data)\n      });\n    };\n  }\n};\n","import { number } from \"prop-types\";\nimport { NonIdealState } from \"@blueprintjs/core\";\n\nexport interface IPlayer {\n  id: number;\n  server_id: number;\n  name: string;\n  level: string;\n}\n\nexport interface IPlayerCurrency {\n  coin: number;\n  jade: number;\n  action_point: number;\n  auto_point: number;\n  honor: number;\n  medal: number;\n  contrib: number;\n  totem_pass: number;\n  s_jade: number;\n  skin_token: number;\n  realm_raid_pass: number;\n}\n\nexport interface IHero {\n  id: string;\n  hero_id: number;\n  equips: string[];\n  level: number;\n  awake: number;\n  star: number;\n  exp: number;\n  exp_rate: number;\n  nick_name: string;\n  born: number;\n  lock: boolean;\n  rarity: HeroRarity;\n  skills: HeroSkill[];\n  attrs: IHeroAttrs;\n  data?: IHeroData;\n  timestamp_from_id?: number;\n}\n\nexport interface IHeroAttrs {\n  max_hp: IHeroAttr;\n  speed: IHeroAttr;\n  crit_power: IHeroAttr;\n  crit_rate: IHeroAttr;\n  defense: IHeroAttr;\n  attack: IHeroAttr;\n  effect_hit_rate: number;\n  effect_resist_rate: number;\n}\n\nexport interface IHeroAttr {\n  base: number;\n  add_value: number;\n  add_rate: number;\n  value: number;\n}\n\nexport interface IHeroData {\n  id: number;\n  name: string;\n  attr_rating: {\n    unawake: IHeroAttrRating;\n    awake: IHeroAttrRating;\n  };\n  rarity: HeroRarity;\n  skills: number[];\n  awake_skill: number | null;\n  awake_base_attrs: { [level: string]: IHeroAttrs };\n}\n\nexport enum Ratings {\n  SS = \"ss\",\n  S = \"s\",\n  A = \"a\",\n  B = \"b\",\n  C = \"c\",\n  D = \"d\"\n}\n\nexport interface IHeroAttrRating {\n  attack: Ratings;\n  max_hp: Ratings;\n  defense: Ratings;\n  speed: Ratings;\n  crit_rate: Ratings;\n}\n\nexport enum HeroRarity {\n  N = \"N\",\n  R = \"R\",\n  SR = \"SR\",\n  SSR = \"SSR\",\n  SP = \"SP\"\n}\n\nexport interface HeroSkill {\n  id: number;\n  level: number;\n}\n\nexport interface IHeroEquip {\n  id: string;\n  suit_id: number;\n  quality: number;\n  pos: number;\n  equip_id: number;\n  level: number;\n  born: number;\n  lock: boolean;\n  garbage: boolean;\n  // deprecated: 0.9.0\n  // attrs: IHeroEquipAttr[];\n  base_attr: IHeroEquipAttr;\n  random_attrs: IHeroEquipAttr[];\n  random_attr_rates: IHeroEquipAttr[];\n  single_attrs: IHeroEquipAttr[];\n  suit_data?: IHeroEquipSuitData;\n  equipped_by?: IHero;\n  included_in_presets?: IHeroEquipPreset[];\n  timestamp_from_id?: number;\n  random_attr_map?: Map<HeroEquipAttrType, number>;\n}\n\nexport interface IHeroEquipSuitData {\n  id: number;\n  name: string;\n  attr: [\n    IHeroEquipSuiteAttr[],\n    IHeroEquipSuiteAttr[],\n    IHeroEquipSuiteAttr[],\n    IHeroEquipSuiteAttr[]\n  ];\n  effect: [string[], string[], string[], string[]];\n}\n\nexport interface IHeroEquipSuiteAttr {\n  type: HeroEquipAttrType;\n  value: number;\n}\n\nexport interface IHeroEquipAttr {\n  type: HeroEquipAttrType;\n  value: number;\n}\n\nexport enum HeroEquipAttrType {\n  Hp = \"Hp\",\n  Defense = \"Defense\",\n  Attack = \"Attack\",\n  HpRate = \"HpRate\",\n  DefenseRate = \"DefenseRate\",\n  AttackRate = \"AttackRate\",\n  Speed = \"Speed\",\n  CritRate = \"CritRate\",\n  CritPower = \"CritPower\",\n  EffectHitRate = \"EffectHitRate\",\n  EffectResistRate = \"EffectResistRate\"\n}\n\nexport interface IHeroEquipPreset {\n  name: string;\n  items: string[];\n}\n\nexport interface IHeroBookShard {\n  hero_id: number;\n  shards: number;\n  books: number;\n  book_max_shards: number;\n  hero_data?: IHeroData;\n}\n\nexport interface IRealmCard {\n  id: string;\n  item_id: number;\n  total_time: number;\n  attrs: {\n    exp: number;\n    bonus: number;\n  };\n  data?: IRealmCardData;\n}\n\nexport interface IRealmCardData {\n  id: number;\n  name: string;\n  star: number;\n}\n\nexport interface IStoryTask {\n  id: number;\n  progress: { value: number; max_value: number };\n}\n\nexport interface IHeroStoryTaskData {\n  hero_id: number;\n  tasks: IStoryTaskData[];\n}\n\nexport interface IStoryTaskData {\n  id: number;\n  achieve_type: number;\n  cond_var: number;\n  content: string;\n}\n\nexport interface ISnapshot {\n  version: string;\n  timestamp: string;\n  data: {\n    player: IPlayer;\n    currency: IPlayerCurrency;\n    heroes: IHero[];\n    hero_equips: IHeroEquip[];\n    hero_equip_presets: IHeroEquipPreset[];\n    hero_book_shards: IHeroBookShard[];\n    realm_cards: IRealmCard[];\n    story_tasks: IStoryTask[];\n  };\n  cbg_url: string | null;\n}\n\nexport interface ICbgSnapshot {\n  listing_info: {\n    server_name: string;\n    player_name: string;\n    player_level: number;\n    price: string;\n    create_time: string;\n  };\n  snapshot: ISnapshot;\n}\n","import moment from \"moment\";\n\nexport type Sorter<T> = (a: T, b: T) => number;\nexport type Filter<T> = (v: T) => boolean;\n\nexport function combineSorters<T>(...sorters: Array<Sorter<T>>): Sorter<T> {\n  return (a, b) => {\n    for (let sorter of sorters) {\n      const r = sorter(a, b);\n      if (r !== 0) {\n        return r;\n      }\n    }\n    return 0;\n  };\n}\n\nexport function combineFilters<T>(...filters: Array<Filter<T>>): Filter<T> {\n  return v => {\n    for (let filter of filters) {\n      const r = filter(v);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  };\n}\n\nexport function sortDesc<T>(sorter: Sorter<T>): Sorter<T> {\n  return (a, b) => -sorter(a, b);\n}\n\nexport enum AttrValueType {\n  Float,\n  Percentage\n}\n\nexport function formatAttrValue(\n  v: number,\n  type: AttrValueType = AttrValueType.Float\n): string {\n  switch (type) {\n    case AttrValueType.Float:\n      return v.toFixed(2);\n    case AttrValueType.Percentage:\n      return `${(Math.round(v * 10000) / 100).toFixed(2)}%`;\n  }\n}\n\nconst DATE_FORMAT = \"YYYY-MM-DD HH:mm\";\n\nexport function formatTimestamp(v?: number) {\n  if (!v) return \"很久以前\";\n  return moment(new Date().setTime(v * 1000))\n    .local()\n    .format(DATE_FORMAT);\n}\n\nexport function getTimestampFromObjectId(id: string) {\n  return parseInt(id.substring(0, 8), 16);\n}\n\nexport function formatDate(date: string | Date, format = DATE_FORMAT) {\n  return moment(date)\n    .local()\n    .format(format);\n}\n\nexport function parseDate(str: string, locale?: string) {\n  return moment(str, DATE_FORMAT).toDate();\n}\n\nexport function computeOnce<T>(f: () => T): () => T {\n  let value: T | null = null;\n  return () => {\n    if (!value) {\n      value = f();\n    }\n    return value;\n  };\n}\n\nexport function formatCurrency(v: number | string, sign = \"¥\") {\n  if (typeof v === \"string\") {\n    v = parseFloat(v);\n  }\n  return sign + v.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, `$&,`);\n}\n","import { IHeroAttrRating, IHeroData, HeroRarity } from \"../../interfaces\";\n\nexport const DATA = require(\"./HERO_DATA.json\");\n\nconst mapAttrRating = (list: string[]) => {\n  return {\n    attack: list[0],\n    max_hp: list[1],\n    defense: list[2],\n    speed: list[3],\n    crit_rate: list[4]\n  } as IHeroAttrRating;\n};\n\nexport const ALL_HERO_DATA: IHeroData[] = DATA.map((i: any) => {\n  return {\n    id: i.id,\n    name: i.name,\n    attr_rating: {\n      unawake: mapAttrRating(i.attr_rating[0]),\n      awake: mapAttrRating(i.attr_rating[1])\n    },\n    rarity: i.rarity,\n    skills: i.skills,\n    awake_skill: i.awake_skill\n  };\n});\n\nconst DataMap: Map<number, IHeroData> = ALL_HERO_DATA.reduce(\n  (m: Map<number, IHeroData>, i: any) => {\n    m.set(i.id, i);\n    return m;\n  },\n  new Map()\n);\n\nexport const RarityRank = [\n  HeroRarity.SP,\n  HeroRarity.SSR,\n  HeroRarity.SR,\n  HeroRarity.R,\n  HeroRarity.N\n]\n  .reverse()\n  .reduce(\n    (m, r, i) => {\n      m[r] = i;\n      return m;\n    },\n    {} as { [key in HeroRarity]: number }\n  );\n\nexport const getHeroData = (heroId: number) => DataMap.get(heroId);\n","import { IAction, IDispatch, IYyxState } from \"../../store\";\nimport { IHero, HeroRarity, IHeroData } from \"../../interfaces\";\nimport { createSelector } from \"reselect\";\nimport { defaultSorter } from \"./sorters\";\nimport { getHeroData, DATA, RarityRank } from \"./data\";\nimport { Sorter, combineFilters, getTimestampFromObjectId } from \"../../utils\";\n\nexport type HeroFilter = (item: IHeroFilterable) => boolean;\n\nexport interface IHeroFilterable {\n  rarity: HeroRarity;\n  star: number;\n  nick_name?: string;\n  hero_id: number;\n}\n\nexport interface IHeroSortable {\n  level: number;\n  star: number;\n  rarity: HeroRarity;\n  born: number;\n}\n\nexport interface IHeroListOptions {\n  fold: boolean;\n  rarity: RarityOption;\n  star: number;\n  term: string;\n}\n\nexport interface IState {\n  listOptions: IHeroListOptions | null;\n}\n\nconst initialState: IState = {\n  listOptions: null\n};\n\nexport type RarityOption = \"*\" | HeroRarity | \"M\";\n\nexport enum ActionType {\n  SetListOptions = \"Hero.SetListOptions\"\n}\n\nexport const HeroActions = {\n  setListOptions(opts: IHeroListOptions) {\n    return {\n      type: ActionType.SetListOptions,\n      payload: opts\n    };\n  }\n};\n\nconst materialRarityFilter = (hero: { hero_id: number }) =>\n  [410, 411, 412, 413].includes(hero.hero_id);\n\nexport function reducer(state = initialState, action: IAction<ActionType>) {\n  const { type, payload } = action;\n  switch (type) {\n    case ActionType.SetListOptions: {\n      return {\n        ...state,\n        listOptions: payload\n      };\n    }\n  }\n  return state;\n}\n\nconst selectAll = (state: IYyxState) =>\n  state.snapshot.current &&\n  state.snapshot.current.data.heroes.map(hero => {\n    hero.data = getHeroData(hero.hero_id);\n    hero.timestamp_from_id = getTimestampFromObjectId(hero.id);\n    return hero;\n  });\n\nconst selectMapById = createSelector(\n  selectAll,\n  heroes => {\n    if (!heroes) {\n      return null;\n    }\n    const groups = heroes.reduce((m, i) => {\n      m.set(i.id, i);\n      return m;\n    }, new Map<string, IHero>());\n    return groups;\n  }\n);\n\nconst selectAllSorted = createSelector(\n  selectAll,\n  heroes => {\n    if (!heroes) {\n      return null;\n    }\n    return heroes.slice().sort(defaultSorter);\n  }\n);\n\nconst selectMapByHeroId = createSelector(\n  selectAllSorted,\n  heroes => {\n    if (!heroes) {\n      return null;\n    }\n    const groups = heroes.reduce((m, i) => {\n      let list = m.get(i.hero_id);\n      if (!list) {\n        list = [];\n        m.set(i.hero_id, list);\n      }\n      list.push(i);\n      return m;\n    }, new Map<number, IHero[]>());\n    return groups;\n  }\n);\n\nexport interface IHeroFolded {\n  hero_id: number;\n  level: number;\n  awake: number;\n  star: number;\n  rarity: HeroRarity;\n  heroes: IHero[];\n  data: IHeroData;\n}\n\nconst FORCE_FOLD_HERO_IDS = [\n  205, // 座敷童子\n  232, // 铁鼠\n  237 // 山兔\n];\n\nconst selectAllFolded = createSelector(\n  selectAllSorted,\n  heroes => {\n    if (!heroes) {\n      return null;\n    }\n\n    const skipped: IHero[] = [];\n\n    let groups = heroes.reduce((m, i) => {\n      if (\n        !FORCE_FOLD_HERO_IDS.includes(i.hero_id) &&\n        (i.awake ||\n          RarityRank[i.rarity] > RarityRank[HeroRarity.SR] ||\n          i.lock ||\n          i.nick_name)\n      ) {\n        skipped.push(i);\n        return m;\n      }\n\n      let group = m.get(i.hero_id);\n      if (!group) {\n        group = [];\n        m.set(i.hero_id, group);\n      }\n      const item = group.find(\n        gi => gi.level === i.level && gi.awake === i.awake && gi.star === i.star\n      );\n      if (item) {\n        item.heroes.push(i);\n      } else {\n        group.push({\n          hero_id: i.hero_id,\n          level: i.level,\n          awake: i.awake,\n          star: i.star,\n          rarity: i.rarity,\n          heroes: [i],\n          data: i.data\n        } as IHeroFolded);\n      }\n      return m;\n    }, new Map<number, IHeroFolded[]>());\n    const folded = [];\n    for (let v of groups.values()) {\n      for (let vi of v) {\n        if (vi.heroes.length === 1) {\n          skipped.push(vi.heroes[0]);\n        } else {\n          folded.push(vi);\n        }\n      }\n    }\n    return [...skipped, ...folded];\n  }\n);\n\nconst selectState = (state: IYyxState) => state.hero;\nconst selectListOptions = createSelector(\n  selectState,\n  state => state.listOptions\n);\n\nconst createTermFilter = (term: string) => {\n  const v = term.trim();\n  const heroIds = DATA.filter((i: IHeroData) => i.name.includes(v)).map(\n    (i: IHeroData) => i.id\n  );\n  return (i: IHeroFilterable) => {\n    return (\n      heroIds.includes(i.hero_id) ||\n      (i.nick_name ? i.nick_name.includes(v) : false)\n    );\n  };\n};\n\nconst createStarFilter = (v: number) => {\n  return (i: IHeroFilterable) => {\n    return i.star === v;\n  };\n};\n\nconst createRarityFilter = (r: RarityOption) => {\n  if (r === \"M\") {\n    return materialRarityFilter;\n  }\n  return (i: IHeroFilterable) => {\n    return i.rarity === r;\n  };\n};\n\nconst selectList = createSelector(\n  selectAllSorted,\n  selectAllFolded,\n  selectListOptions,\n  (sorted, folded, opts) => {\n    if (!opts) {\n      return null;\n    }\n\n    const filters = [\n      opts.term && createTermFilter(opts.term),\n      opts.rarity === \"*\" ? null : createRarityFilter(opts.rarity),\n      opts.star && createStarFilter(opts.star)\n    ].filter(v => !!v) as HeroFilter[];\n    const filter = filters.length && combineFilters(...filters);\n    if (opts.fold) {\n      if (!folded) {\n        return null;\n      }\n      return filter ? folded.filter(filter) : folded;\n    } else {\n      if (!sorted) {\n        return null;\n      }\n      return filter ? sorted.filter(filter) : sorted;\n    }\n  }\n);\n\nconst selectCount = createSelector(\n  selectList,\n  list => {\n    if (!list) {\n      return 0;\n    }\n    return list\n      .map(i => {\n        if (\"heroes\" in i) {\n          return i.heroes.length;\n        } else {\n          return 1;\n        }\n      })\n      .reduce((l, r) => l + r, 0);\n  }\n);\n\nexport const HeroSelectors = {\n  selectAll,\n  selectAllSorted,\n  selectAllFolded,\n  selectMapById,\n  selectMapByHeroId,\n  selectListOptions,\n  selectList,\n  selectCount\n};\n","import { IHero, HeroRarity } from \"../../interfaces\";\nimport { combineSorters, sortDesc } from \"../../utils\";\nimport { RarityRank } from \"./data\";\n\nexport const sortByRarity = (a: IHero, b: IHero) =>\n  RarityRank[b.rarity] - RarityRank[a.rarity];\nexport const sortByHeroId = (a: IHero, b: IHero) => a.hero_id - b.hero_id;\nexport const sortByLevel = (a: IHero, b: IHero) => a.level - b.level;\nexport const sortByStar = (a: IHero, b: IHero) => a.star - b.star;\nexport const sortByAwake = (a: IHero, b: IHero) => a.awake - b.awake;\nexport const defaultSorter = combineSorters(\n  sortDesc(sortByStar),\n  sortByRarity,\n  sortDesc(sortByAwake),\n  sortDesc(sortByLevel),\n  sortDesc(sortByHeroId)\n);\n","import { combineSorters, sortDesc } from \"../../utils\";\nimport { IHeroEquip } from \"../../interfaces\";\n\nexport const sortByQuality = (a: IHeroEquip, b: IHeroEquip) =>\n  a.quality - b.quality;\nexport const sortByLevel = (a: IHeroEquip, b: IHeroEquip) => a.level - b.level;\nexport const sortBySuit = (a: IHeroEquip, b: IHeroEquip) =>\n  a.suit_id - b.suit_id;\n\nexport const defaultSorter = combineSorters(\n  sortDesc(sortByQuality),\n  sortDesc(sortByLevel),\n  sortBySuit\n);\n","import { IHeroEquipSuitData } from \"../../interfaces\";\n\nconst DATA = require(\"./EQUIP_SUIT_DATA.json\");\n\nexport const ALL_SUIT_DATA: IHeroEquipSuitData[] = DATA;\n\nconst DataMap: Map<number, IHeroEquipSuitData> = ALL_SUIT_DATA.reduce(\n  (m: Map<number, IHeroEquipSuitData>, i: any) => {\n    m.set(i.id, i);\n    return m;\n  },\n  new Map()\n);\n\nexport const getEquipSuiteData = (id: number) => DataMap.get(id);\n","import {\n  HeroEquipAttrType,\n  IHeroEquipSuitData,\n  IHeroEquip\n} from \"../../interfaces\";\nimport { formatAttrValue, AttrValueType } from \"../../utils\";\n\nconst AttrNames = {\n  [HeroEquipAttrType.Hp]: \"生命\",\n  [HeroEquipAttrType.Defense]: \"防御\",\n  [HeroEquipAttrType.Attack]: \"攻击\",\n  [HeroEquipAttrType.HpRate]: \"生命加成\",\n  [HeroEquipAttrType.DefenseRate]: \"防御加成\",\n  [HeroEquipAttrType.AttackRate]: \"攻击加成\",\n  [HeroEquipAttrType.Speed]: \"速度\",\n  [HeroEquipAttrType.CritRate]: \"暴击\",\n  [HeroEquipAttrType.CritPower]: \"暴击伤害\",\n  [HeroEquipAttrType.EffectHitRate]: \"效果命中\",\n  [HeroEquipAttrType.EffectResistRate]: \"效果抵抗\"\n};\n\nconst PercentageAttrs = [\n  HeroEquipAttrType.HpRate,\n  HeroEquipAttrType.DefenseRate,\n  HeroEquipAttrType.AttackRate,\n  HeroEquipAttrType.CritRate,\n  HeroEquipAttrType.CritPower,\n  HeroEquipAttrType.EffectHitRate,\n  HeroEquipAttrType.EffectResistRate\n];\n\nexport const HeroEquipPosAttrBaseTypes = new Map<number, HeroEquipAttrType[]>([\n  [1, [HeroEquipAttrType.Attack]],\n  [\n    2,\n    [\n      HeroEquipAttrType.AttackRate,\n      HeroEquipAttrType.DefenseRate,\n      HeroEquipAttrType.HpRate,\n      HeroEquipAttrType.Speed\n    ]\n  ],\n  [3, [HeroEquipAttrType.Defense]],\n  [\n    4,\n    [\n      HeroEquipAttrType.AttackRate,\n      HeroEquipAttrType.DefenseRate,\n      HeroEquipAttrType.HpRate,\n      HeroEquipAttrType.EffectHitRate,\n      HeroEquipAttrType.EffectResistRate\n    ]\n  ],\n  [5, [HeroEquipAttrType.Hp]],\n  [\n    6,\n    [\n      HeroEquipAttrType.AttackRate,\n      HeroEquipAttrType.DefenseRate,\n      HeroEquipAttrType.HpRate,\n      HeroEquipAttrType.CritRate,\n      HeroEquipAttrType.CritPower\n    ]\n  ]\n]);\n\nexport const formatEquipAttrValue = (\n  type: HeroEquipAttrType,\n  value: number,\n  plus?: boolean\n) => {\n  return (\n    (plus && value ? \"+\" : \"\") +\n    formatAttrValue(\n      value,\n      PercentageAttrs.includes(type)\n        ? AttrValueType.Percentage\n        : AttrValueType.Float\n    )\n  );\n};\n\nexport const formatEquipAttr = (type: HeroEquipAttrType, value: number) => {\n  return [\n    AttrNames[type],\n    formatAttrValue(\n      value,\n      PercentageAttrs.includes(type)\n        ? AttrValueType.Percentage\n        : AttrValueType.Float\n    )\n  ];\n};\n\nexport const getEquipAttrName = (type: HeroEquipAttrType) => AttrNames[type];\n\nexport const getEquipSuitAttrName = (suit: IHeroEquipSuitData) => {\n  const attr2 = suit.attr[1].length && suit.attr[1][0];\n  return attr2 ? getEquipAttrName(attr2.type) : \"单件属性\";\n};\n\nexport const getEquipRandomAttrValue = (\n  equip: IHeroEquip,\n  type: HeroEquipAttrType\n) => {\n  if (!equip.random_attr_map) {\n    equip.random_attr_map = new Map(equip.random_attrs.map(attr => [\n      attr.type,\n      attr.value\n    ]) as [HeroEquipAttrType, number][]);\n  }\n  return equip.random_attr_map.get(type) || null;\n};\n","import { HeroEquipAttrType, IHeroEquip } from \"../../interfaces\";\nimport { getEquipRandomAttrValue } from \"./attr\";\n\n// http://nga.178.com/read.php?tid=15853326\n\nexport interface IScoreData {\n  score: number;\n  attrs: [HeroEquipAttrType, number][];\n}\n\nconst round0 = (v: number) => Math.round(v);\nconst round2 = (v: number) => Math.round(v * 100) / 100;\n\nconst AttrValueRounders: Map<\n  HeroEquipAttrType,\n  (v: number) => number\n> = new Map([\n  [HeroEquipAttrType.Speed, round0],\n  [HeroEquipAttrType.AttackRate, round2],\n  [HeroEquipAttrType.CritRate, round2],\n  [HeroEquipAttrType.CritPower, round2],\n  [HeroEquipAttrType.EffectHitRate, round2],\n  [HeroEquipAttrType.EffectResistRate, round2]\n]);\n\nconst SCORE_DATA: IScoreData[] = [];\n\nconst match = (equip: IHeroEquip, data: IScoreData) => {\n  if (equip.random_attrs.length < data.attrs.length) {\n    return false;\n  }\n\n  for (let [reqType, reqValue] of data.attrs) {\n    const round = AttrValueRounders.get(reqType);\n    let value = getEquipRandomAttrValue(equip, reqType);\n    if (!value) {\n      return false;\n    }\n    if (round) {\n      value = round(value);\n    }\n    if (value < reqValue) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/*\n为了给大家更直观理解3分、5分御魂的概念，做了一些举例，其中(1~3)代表着后续说的是3个御魂，为了简便起见，合并成一行展示，御魂之间用分号“；”隔开了。。(7)、(8)这些就是指的单个御魂：\n*/\n\n/*\n3分御魂：\n*/\n\n// (1~3)速度+8；暴击+8；攻击加成+8\n\nSCORE_DATA.push({\n  score: 3,\n  attrs: [[HeroEquipAttrType.Speed, 8]]\n});\n\nSCORE_DATA.push({\n  score: 3,\n  attrs: [[HeroEquipAttrType.CritRate, 0.08]]\n});\n\nSCORE_DATA.push({\n  score: 3,\n  attrs: [[HeroEquipAttrType.AttackRate, 0.08]]\n});\n\n// (4~6)暴击伤害+11；效果命中+11；效果抵抗+11\n\nSCORE_DATA.push({\n  score: 3,\n  attrs: [[HeroEquipAttrType.CritPower, 0.11]]\n});\n\nSCORE_DATA.push({\n  score: 3,\n  attrs: [[HeroEquipAttrType.EffectHitRate, 0.11]]\n});\n\nSCORE_DATA.push({\n  score: 3,\n  attrs: [[HeroEquipAttrType.EffectResistRate, 0.11]]\n});\n\n// (7)速度+3 & 暴击+3 & 暴击伤害+4\n\nSCORE_DATA.push({\n  score: 3,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.CritRate, 0.03],\n    [HeroEquipAttrType.CritPower, 0.04]\n  ]\n});\n\n// (8)速度+3 & 暴击+6\n\nSCORE_DATA.push({\n  score: 3,\n  attrs: [[HeroEquipAttrType.Speed, 3], [HeroEquipAttrType.CritRate, 0.06]]\n});\n\n/*\n4分御魂\n*/\n\n// (1~3)速度+11；暴击+11；攻击加成+11；\nSCORE_DATA.push({\n  score: 4,\n  attrs: [[HeroEquipAttrType.Speed, 11]]\n});\n\nSCORE_DATA.push({\n  score: 4,\n  attrs: [[HeroEquipAttrType.CritRate, 0.11]]\n});\n\nSCORE_DATA.push({\n  score: 4,\n  attrs: [[HeroEquipAttrType.AttackRate, 0.11]]\n});\n\n// (4~6)暴击伤害+14；效果命中+14；效果抵抗+14；\nSCORE_DATA.push({\n  score: 4,\n  attrs: [[HeroEquipAttrType.CritPower, 0.14]]\n});\n\nSCORE_DATA.push({\n  score: 4,\n  attrs: [[HeroEquipAttrType.EffectHitRate, 0.14]]\n});\n\nSCORE_DATA.push({\n  score: 4,\n  attrs: [[HeroEquipAttrType.EffectResistRate, 0.14]]\n});\n\n// (7)速度+3 & 暴击+3 & 暴击伤害+7\nSCORE_DATA.push({\n  score: 4,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.CritRate, 0.03],\n    [HeroEquipAttrType.CritPower, 0.07]\n  ]\n});\n\n// (8)攻击加成+3 & 速度+3 & 暴击伤害+7\nSCORE_DATA.push({\n  score: 4,\n  attrs: [\n    [HeroEquipAttrType.AttackRate, 0.03],\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.CritPower, 0.07]\n  ]\n});\n\n/*\n5分御魂：\n*/\n\n// (1~3)速度+13；暴击+13；攻击加成+13； (相信对于绝大多数人而言，这样的御魂已经算是“好御魂”了)\nSCORE_DATA.push({\n  score: 5,\n  attrs: [[HeroEquipAttrType.Speed, 13]]\n});\n\nSCORE_DATA.push({\n  score: 5,\n  attrs: [[HeroEquipAttrType.CritRate, 0.13]]\n});\n\nSCORE_DATA.push({\n  score: 5,\n  attrs: [[HeroEquipAttrType.AttackRate, 0.13]]\n});\n\n// (4~6)暴击伤害+18；效果命中+18；效果抵抗+18；\n\nSCORE_DATA.push({\n  score: 5,\n  attrs: [[HeroEquipAttrType.CritPower, 0.18]]\n});\n\nSCORE_DATA.push({\n  score: 5,\n  attrs: [[HeroEquipAttrType.EffectHitRate, 0.18]]\n});\n\nSCORE_DATA.push({\n  score: 5,\n  attrs: [[HeroEquipAttrType.EffectResistRate, 0.18]]\n});\n\n// (7)速度+8 & 效果命中+4 & 效果抵抗+4\n\nSCORE_DATA.push({\n  score: 5,\n  attrs: [\n    [HeroEquipAttrType.Speed, 8],\n    [HeroEquipAttrType.EffectHitRate, 0.04],\n    [HeroEquipAttrType.EffectResistRate, 0.04]\n  ]\n});\n\n// (8)速度+3 & 效果命中+7 & 效果抵抗+7 (这个御魂，可能在人心目中就是“平平无奇”)\n\nSCORE_DATA.push({\n  score: 5,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.EffectHitRate, 0.07],\n    [HeroEquipAttrType.EffectResistRate, 0.07]\n  ]\n});\n\n/*\n6分御魂\n*/\n\n// (1~3)速度+16；暴击+16；攻击加成+16 (准“极品”御魂，速度类顶级御魂)\n\nSCORE_DATA.push({\n  score: 6,\n  attrs: [[HeroEquipAttrType.Speed, 16]]\n});\n\nSCORE_DATA.push({\n  score: 6,\n  attrs: [[HeroEquipAttrType.CritRate, 0.16]]\n});\n\nSCORE_DATA.push({\n  score: 6,\n  attrs: [[HeroEquipAttrType.AttackRate, 0.16]]\n});\n\n// (4~6)暴击伤害+22；效果命中+22；效果抵抗+22\nSCORE_DATA.push({\n  score: 6,\n  attrs: [[HeroEquipAttrType.CritPower, 0.22]]\n});\n\nSCORE_DATA.push({\n  score: 6,\n  attrs: [[HeroEquipAttrType.EffectHitRate, 0.22]]\n});\n\nSCORE_DATA.push({\n  score: 6,\n  attrs: [[HeroEquipAttrType.EffectResistRate, 0.22]]\n});\n\n// (7)速度+8 & 效果命中+7 & 效果抵抗4\nSCORE_DATA.push({\n  score: 6,\n  attrs: [\n    [HeroEquipAttrType.Speed, 8],\n    [HeroEquipAttrType.EffectHitRate, 0.07],\n    [HeroEquipAttrType.EffectResistRate, 0.04]\n  ]\n});\n\n// (8)速度+3 & 效果命中+7 & 效果抵抗+11\n\nSCORE_DATA.push({\n  score: 6,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.EffectHitRate, 0.07],\n    [HeroEquipAttrType.EffectResistRate, 0.11]\n  ]\n});\n\n/*\n7分御魂\n*/\n\n// (1)速度+16 & 暴击+3\n\nSCORE_DATA.push({\n  score: 7,\n  attrs: [[HeroEquipAttrType.Speed, 16], [HeroEquipAttrType.CritRate, 0.03]]\n});\n\n// (2)速度+3 & 效果命中+22 (纯命中类顶级御魂)\n\nSCORE_DATA.push({\n  score: 7,\n  attrs: [[HeroEquipAttrType.Speed, 3], [HeroEquipAttrType.EffectHitRate, 0.22]]\n});\n\n// (3)速度+3 & 攻击加成+11 & 暴击+5\n\nSCORE_DATA.push({\n  score: 7,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.AttackRate, 0.11],\n    [HeroEquipAttrType.CritRate, 0.05]\n  ]\n});\n\n// (4)速度+3 & 效果命中+11 & 效果抵抗+11\n\nSCORE_DATA.push({\n  score: 7,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.EffectHitRate, 0.11],\n    [HeroEquipAttrType.EffectResistRate, 0.11]\n  ]\n});\n\n/*\n8分御魂\n*/\n\n// (1)速度+16 & 暴击+3 & 攻击加成+3\n\nSCORE_DATA.push({\n  score: 8,\n  attrs: [\n    [HeroEquipAttrType.Speed, 16],\n    [HeroEquipAttrType.CritRate, 0.03],\n    [HeroEquipAttrType.AttackRate, 0.03]\n  ]\n});\n\n// (2)速度+8 & 效果命中+7 & 效果抵抗+11 (双堆类顶级御魂1)\n\nSCORE_DATA.push({\n  score: 8,\n  attrs: [\n    [HeroEquipAttrType.Speed, 8],\n    [HeroEquipAttrType.EffectHitRate, 0.07],\n    [HeroEquipAttrType.EffectResistRate, 0.11]\n  ]\n});\n\n// (3)速度+3 & 效果命中+11 & 效果抵抗+14 (双堆类顶级御魂2)\n\nSCORE_DATA.push({\n  score: 8,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.EffectHitRate, 0.11],\n    [HeroEquipAttrType.EffectResistRate, 0.14]\n  ]\n});\n\n// (4)速度+3 & 暴击+11 & 暴击伤害+11\n\nSCORE_DATA.push({\n  score: 8,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.CritRate, 0.11],\n    [HeroEquipAttrType.CritPower, 0.11]\n  ]\n});\n\n/*\n9分御魂\n\n(3)速度+8 & 暴击+3 & 攻击加成+8 & 暴击伤害+11 (输出类满分御魂)\n*/\n\nSCORE_DATA.push({\n  score: 9,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.CritRate, 0.16],\n    [HeroEquipAttrType.AttackRate, 0.03],\n    [HeroEquipAttrType.CritPower, 0.04]\n  ]\n});\n\n// (2)速度+3 & 暴击+11 & 攻击加成+3 & 暴击伤害+11(输出类顶级御魂2)\n\nSCORE_DATA.push({\n  score: 9,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.CritRate, 0.11],\n    [HeroEquipAttrType.AttackRate, 0.03],\n    [HeroEquipAttrType.CritPower, 0.11]\n  ]\n});\n\n// (2)速度+3 & 暴击+8 & 攻击加成+3 & 暴击伤害+14(输出类顶级御魂3)\n\nSCORE_DATA.push({\n  score: 9,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.CritRate, 0.08],\n    [HeroEquipAttrType.AttackRate, 0.03],\n    [HeroEquipAttrType.CritPower, 0.14]\n  ]\n});\n\n// (1)速度+3 & 暴击+16 & 攻击加成+3 & 暴击伤害+4 (输出类顶级御魂1)\n\nSCORE_DATA.push({\n  score: 9,\n  attrs: [\n    [HeroEquipAttrType.Speed, 3],\n    [HeroEquipAttrType.CritRate, 0.16],\n    [HeroEquipAttrType.AttackRate, 0.03],\n    [HeroEquipAttrType.CritPower, 0.04]\n  ]\n});\n\nSCORE_DATA.sort((a, b) => b.score - a.score);\n\nexport function getEquipScoreData(equip: IHeroEquip): IScoreData | null {\n  for (let item of SCORE_DATA) {\n    if (match(equip, item)) {\n      return item;\n    }\n  }\n  return null;\n}\n","import { IAction, IDispatch, IYyxState } from \"../../store\";\nimport { createSelector } from \"reselect\";\nimport {\n  IHeroEquip,\n  HeroEquipAttrType,\n  IHeroEquipPreset,\n  IHero,\n  IHeroEquipSuitData\n} from \"../../interfaces\";\nimport { defaultSorter } from \"./sorters\";\nimport { getEquipSuiteData } from \"./data\";\nimport { HeroSelectors } from \"../hero\";\nimport { SnapshotSelectors } from \"../snapshot\";\nimport { getTimestampFromObjectId, Filter, combineFilters } from \"../../utils\";\nimport { getEquipScoreData } from \"./score\";\n\nexport interface IState {\n  listOptions: IEquipListOptions | null;\n}\n\nconst initialState: IState = {\n  listOptions: null\n};\n\nexport enum ActionType {\n  SetListOptions = \"Equip.etListOptions\"\n}\n\nexport const EquipActions = {\n  setListOptions(opts: IEquipListOptions) {\n    return {\n      type: ActionType.SetListOptions,\n      payload: opts\n    };\n  }\n};\n\nexport function reducer(state = initialState, action: IAction<ActionType>) {\n  const { type, payload } = action;\n  switch (type) {\n    case ActionType.SetListOptions: {\n      return {\n        ...state,\n        listOptions: payload\n      };\n    }\n  }\n  return state;\n}\n\nconst selectEquippedByMap = createSelector(\n  HeroSelectors.selectAll,\n  heroes => {\n    const equippedByMap = new Map<string, IHero>();\n    if (heroes) {\n      for (let h of heroes) {\n        for (let id of h.equips) {\n          equippedByMap.set(id, h);\n        }\n      }\n    }\n    return equippedByMap;\n  }\n);\n\nconst selectPresets = createSelector(\n  SnapshotSelectors.selectCurrentSnapshot,\n  snapshot => {\n    if (!snapshot) {\n      return null;\n    }\n    return snapshot.data.hero_equip_presets;\n  }\n);\n\nconst selectIncludedInPresetsMap = createSelector(\n  selectPresets,\n  presets => {\n    const map = new Map<string, IHeroEquipPreset[]>();\n    if (presets) {\n      for (let p of presets) {\n        for (let id of p.items) {\n          let list = map.get(id);\n          if (!list) {\n            list = [p];\n            map.set(id, list);\n          } else {\n            list.push(p);\n          }\n        }\n      }\n    }\n    return map;\n  }\n);\n\nconst selectAll = createSelector(\n  (state: IYyxState) => state.snapshot.current,\n  selectEquippedByMap,\n  selectIncludedInPresetsMap,\n  (snapshot, equippedBy, inPresets) => {\n    if (!snapshot) {\n      return null;\n    }\n    return snapshot.data.hero_equips.map(equip => {\n      equip.suit_data = getEquipSuiteData(equip.suit_id);\n      equip.equipped_by = equippedBy.get(equip.id);\n      equip.included_in_presets = inPresets.get(equip.id);\n      equip.timestamp_from_id = getTimestampFromObjectId(equip.id);\n      return equip;\n    });\n  }\n);\n\nconst selectAllSorted = createSelector(\n  selectAll,\n  equips => {\n    if (!equips) {\n      return null;\n    }\n    return equips.slice().sort(defaultSorter);\n  }\n);\n\nconst selectMaps = createSelector(\n  selectAllSorted,\n  equips => {\n    if (!equips) {\n      return null;\n    }\n\n    const idMap = new Map<string, IHeroEquip>();\n    const qualityMap = new Map<number, IHeroEquip[]>();\n    const levelMap = new Map<number, IHeroEquip[]>();\n    const suitMap = new Map<number, IHeroEquip[]>();\n    const posMap = new Map<number, IHeroEquip[]>();\n    const baseAttrMap = new Map<HeroEquipAttrType, IHeroEquip[]>();\n\n    function push<K>(\n      map: Map<K, IHeroEquip[]>,\n      i: IHeroEquip,\n      selector: (i: IHeroEquip) => K\n    ) {\n      const key = selector(i);\n      let list = map.get(key);\n      if (!list) {\n        list = [i];\n        map.set(key, list);\n      } else {\n        list.push(i);\n      }\n    }\n\n    for (let e of equips) {\n      idMap.set(e.id, e);\n      push(qualityMap, e, e => e.quality);\n      push(levelMap, e, e => e.level);\n      push(suitMap, e, e => e.suit_id);\n      push(posMap, e, e => e.pos);\n      push(baseAttrMap, e, e => e.base_attr.type);\n    }\n\n    return {\n      id: idMap,\n      quality: qualityMap,\n      level: levelMap,\n      suit: suitMap,\n      base_attr: baseAttrMap\n    };\n  }\n);\n\nexport enum EquipLevelFilter {\n  Any,\n  Zero,\n  Max\n}\n\nexport enum EquipEquippedFilter {\n  Any,\n  Equipped,\n  NotEquipped\n}\n\nexport interface IEquipListOptions {\n  id: string;\n  types: number[] | null;\n  positions: number[];\n  stars: number[];\n  baseAttrs: HeroEquipAttrType[] | null;\n  trashed: boolean | null;\n  level: EquipLevelFilter;\n  equipped: EquipEquippedFilter;\n  creationTimeFrom: Date | null;\n  creationTimeTo: Date | null;\n  scores: number[];\n}\n\nconst selectDisplay = createSelector(\n  selectAllSorted,\n  (state: IYyxState) => state.equip.listOptions,\n  (equips, opts) => {\n    if (!opts) {\n      return null;\n    }\n\n    if (!equips) {\n      return null;\n    }\n\n    if (opts.id) {\n      return equips.filter(e => e.id === opts.id);\n    }\n\n    const filters: Array<Filter<IHeroEquip>> = [];\n\n    if (opts.types && opts.types.length) {\n      filters.push(i => !!(opts.types && opts.types.includes(i.suit_id)));\n    }\n\n    if (opts.positions && opts.positions.length) {\n      filters.push(\n        i => !!(opts.positions && opts.positions.includes(i.pos + 1))\n      );\n    }\n\n    if (opts.stars && opts.stars.length) {\n      filters.push(i => !!(opts.stars && opts.stars.includes(i.quality)));\n    }\n\n    if (opts.baseAttrs && opts.baseAttrs.length) {\n      filters.push(\n        i => !!(opts.baseAttrs && opts.baseAttrs.includes(i.base_attr.type))\n      );\n    }\n\n    if (opts.level !== EquipLevelFilter.Any) {\n      if (opts.level === EquipLevelFilter.Zero) {\n        filters.push(i => i.level === 0);\n      } else {\n        filters.push(i => i.level === 15);\n      }\n    }\n\n    if (opts.equipped !== EquipEquippedFilter.Any) {\n      if (opts.equipped === EquipEquippedFilter.Equipped) {\n        filters.push(i => !!i.equipped_by);\n      } else {\n        filters.push(i => !i.equipped_by);\n      }\n    }\n\n    if (opts.trashed !== null) {\n      filters.push(i => i.garbage === opts.trashed);\n    }\n\n    if (opts.scores.length) {\n      filters.push(i => {\n        const scoreData = getEquipScoreData(i);\n        if (!scoreData) {\n          return false;\n        } else {\n          return opts.scores.includes(scoreData.score);\n        }\n      });\n    }\n\n    if (opts.creationTimeFrom) {\n      const t = opts.creationTimeFrom.getTime() / 1000;\n      filters.push(i => getTimestampFromObjectId(i.id) >= t);\n    }\n\n    if (opts.creationTimeTo) {\n      const t = opts.creationTimeTo.getTime() / 1000;\n      filters.push(i => getTimestampFromObjectId(i.id) < t);\n    }\n\n    if (filters.length) {\n      return equips.filter(combineFilters(...filters));\n    }\n\n    return equips;\n  }\n);\n\nexport type IEquipPresetItem = IHeroEquipPreset & IEquipSetInfo;\n\nexport interface IEquipSetInfo {\n  equips: IHeroEquip[];\n  suits: IHeroEquipSuitData[];\n  attrMap: Map<HeroEquipAttrType, number>;\n}\n\nexport const computeEquipSetInfo = (equips: IHeroEquip[]) => {\n  const suitCount = new Map<number, number>();\n  const attrMap = new Map<HeroEquipAttrType, number>();\n  const suits = [];\n  suitCount.clear();\n  for (const equip of equips) {\n    for (const attr of equip.random_attrs) {\n      const v = attrMap.get(attr.type) || 0;\n      attrMap.set(attr.type, v + attr.value);\n    }\n\n    {\n      const v = attrMap.get(equip.base_attr.type) || 0;\n      attrMap.set(equip.base_attr.type, v + equip.base_attr.value);\n    }\n\n    for (let attr of equip.single_attrs) {\n      const v = attrMap.get(attr.type) || 0;\n      attrMap.set(attr.type, v + attr.value);\n    }\n\n    const c = suitCount.get(equip.suit_id) || 0;\n    suitCount.set(equip.suit_id, c + 1);\n  }\n  for (let [suitId, count] of suitCount.entries()) {\n    if (count >= 2) {\n      const data = getEquipSuiteData(suitId);\n      if (data) {\n        if (data.effect[1].length) {\n          suits.push(data);\n        }\n        if (data.attr[1].length) {\n          for (let attr of data.attr[1]) {\n            const v = attrMap.get(attr.type) || 0;\n            attrMap.set(attr.type, v + attr.value);\n          }\n        }\n        if (data.effect[3].length && count >= 4) {\n          suits.push(data);\n        }\n      } else {\n        console.warn(`unknown equip suit id: ${suitId}`);\n      }\n    }\n  }\n  return {\n    suits,\n    equips,\n    attrMap\n  } as IEquipSetInfo;\n};\n\nconst selectPresetItems = createSelector(\n  selectPresets,\n  selectMaps,\n  (presets, maps) => {\n    if (!presets || !maps) {\n      return null;\n    }\n    return presets.map(p => {\n      const equips = p.items\n        .map(id => maps.id.get(id))\n        .filter(v => !!v) as IHeroEquip[];\n      return {\n        ...p,\n        ...computeEquipSetInfo(equips)\n      } as IEquipPresetItem;\n    });\n  }\n);\n\nexport const EquipSelectors = {\n  selectAllSorted,\n  selectMaps,\n  selectDisplay,\n  selectPresetItems\n};\n","import React, { SFC } from \"react\";\nimport \"./Star.scss\";\nimport classNames from \"classnames\";\n\nexport interface StarProps {\n  type: StarType;\n}\n\nexport enum StarType {\n  Grey = \"grey\",\n  Orange = \"orange\",\n  Purple = \"purple\",\n  Blue = \"blue\"\n}\n\nconst renderStar = (i: number, type: StarType) => {\n  return <i key={i} className={classNames(\"star\", `star-${type}`)} />;\n};\n\nconst Elements: { [key: string]: JSX.Element[][] } = {\n  [StarType.Orange]: [],\n  [StarType.Purple]: [],\n  [StarType.Blue]: []\n};\nfor (let i = 0; i < 6; i++) {\n  const orangeElems = [];\n  const purpleElems = [];\n  const blueElems = [];\n  for (let ii = 0; ii <= i; ii++) {\n    orangeElems.push(renderStar(ii, StarType.Orange));\n    purpleElems.push(renderStar(ii, StarType.Purple));\n    blueElems.push(renderStar(ii, StarType.Blue));\n  }\n  for (let ii = i + 1; ii < 6; ii++) {\n    orangeElems.push(renderStar(ii, StarType.Grey));\n    purpleElems.push(renderStar(ii, StarType.Grey));\n    blueElems.push(renderStar(ii, StarType.Grey));\n  }\n  Elements[StarType.Orange].push(orangeElems);\n  Elements[StarType.Purple].push(purpleElems);\n  Elements[StarType.Blue].push(blueElems);\n}\n\nexport const Stars: SFC<StarProps & { level: number }> = props => {\n  return <span className=\"stars\">{Elements[props.type][props.level - 1]}</span>;\n};\n","import {\n  createStore,\n  combineReducers,\n  applyMiddleware,\n  compose,\n  Dispatch\n} from \"redux\";\nimport thunk, { ThunkDispatch, ThunkAction } from \"redux-thunk\";\n\nimport * as error from \"./modules/error\";\nimport * as snapshot from \"./modules/snapshot\";\nimport * as hero from \"./modules/hero\";\nimport * as equip from \"./modules/equip\";\n\ntype ActionType =\n  | error.ActionType\n  | snapshot.ActionType\n  | hero.ActionType\n  | equip.ActionType;\n\nexport interface IAction<T = ActionType> {\n  type: T;\n  payload?: any;\n}\n\nexport type IDispatch<T = ActionType> = ThunkDispatch<\n  IYyxState,\n  void,\n  IAction<T>\n>;\n\nexport interface IYyxState {\n  error: error.IState;\n  snapshot: snapshot.IState;\n  hero: hero.IState;\n  equip: equip.IState;\n}\n\nconst composeEnhancers =\n  (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nexport const YyxStore = createStore<IYyxState, any, {}, {}>(\n  combineReducers({\n    error: error.reducer,\n    snapshot: snapshot.reducer,\n    hero: hero.reducer,\n    equip: equip.reducer\n  }),\n  composeEnhancers(applyMiddleware(thunk))\n);\n","import { connect } from \"react-redux\";\nimport { ReactElement, SFC } from \"react\";\nimport { IYyxState } from \"../../store\";\nimport { ISnapshot } from \"../../interfaces\";\n\ninterface RenderProps {\n  current: ISnapshot | null;\n  notSelected: boolean;\n  render: (info: ISnapshot | null) => ReactElement | null;\n}\n\nconst Render: SFC<RenderProps> = (props: RenderProps) => {\n  return props.render(props.current);\n};\n\nexport interface SnapshotInfoProps {\n  render: (info: ISnapshot | null) => ReactElement | null;\n}\n\nexport const SnapshotInfo = connect(\n  (state: IYyxState) => ({\n    current: state.snapshot.current,\n    notSelected: state.snapshot.currentNotSelected\n  }),\n  null,\n  (stateProps, dispatchProps, ownProps: SnapshotInfoProps) => ({\n    ...stateProps,\n    render: ownProps.render\n  })\n)(Render);\n","import React, { SFC } from \"react\";\nimport \"./OverviewPage.scss\";\nimport { SnapshotInfo } from \"../Snapshot/SnapshotInfo\";\nimport { Card } from \"@blueprintjs/core\";\nimport { ISnapshot } from \"../../interfaces\";\nimport { formatDate } from \"../../utils\";\n\nconst render = (info: ISnapshot | null) => {\n  if (!info) {\n    return null;\n  }\n\n  const { player, currency, heroes, hero_equips } = info.data;\n\n  return (\n    <table className=\"bp3-html-table bp3-html-table-striped yyx-prop-table\">\n      <tbody>\n        <tr>\n          <td>快照版本</td>\n          <td>{info.version}</td>\n        </tr>\n        {info.cbg_url && (\n          <tr>\n            <td>藏宝阁地址</td>\n            <td>\n              <a target=\"_blank\" href={info.cbg_url}>\n                {info.cbg_url}\n              </a>\n            </td>\n          </tr>\n        )}\n        <tr>\n          <td>快照日期</td>\n          <td>{formatDate(info.timestamp)}</td>\n        </tr>\n        <tr>\n          <td>玩家</td>\n          <td>\n            {player.name} Lv.{player.level}\n          </td>\n        </tr>\n        <tr>\n          <td>资产</td>\n          <td>\n            <ul className=\"bp3-list-unstyled\">\n              <li>金币: {currency.coin}</li>\n              <li>勾玉: {currency.jade}</li>\n              <li>体力: {currency.action_point}</li>\n              <li>樱饼: {currency.auto_point}</li>\n              <li>荣誉: {currency.honor}</li>\n              <li>勋章: {currency.medal}</li>\n              {!info.cbg_url && <li>功勋: {currency.contrib}</li>}\n              <li>御灵境之钥: {currency.totem_pass}</li>\n              <li>魂玉: {currency.s_jade}</li>\n              <li>皮肤券: {currency.skin_token}</li>\n              {!info.cbg_url && <li>突破券: {currency.realm_raid_pass}</li>}\n            </ul>\n          </td>\n        </tr>\n        <tr>\n          <td>式神数量</td>\n          <td>{heroes.length}</td>\n        </tr>\n        <tr>\n          <td>御魂数量</td>\n          <td>{hero_equips.length}</td>\n        </tr>\n      </tbody>\n    </table>\n  );\n};\n\nconst OverviewPage: SFC = props => {\n  return <SnapshotInfo render={render} />;\n};\n\nexport { OverviewPage };\n","import React, { SFC, MouseEventHandler } from \"react\";\nimport \"./SubNav.scss\";\nimport classNames from \"classnames\";\nimport { Menu, Classes, MenuItem, MenuDivider, Icon } from \"@blueprintjs/core\";\nimport { withRouter, RouteComponentProps, Link } from \"react-router-dom\";\n\nexport interface SubNavLink {\n  label: string;\n  to: string;\n}\n\nconst Render: SFC<RouteComponentProps & { links: SubNavLink[] }> = props => {\n  const path = props.location.pathname;\n  return (\n    <Menu large className=\"sub-nav\">\n      {props.links.map((link, i) => (\n        <MenuItem\n          key={i}\n          active={path === link.to}\n          text={link.label}\n          href={link.to}\n          onClick={(e: React.MouseEvent) => handleLinkClick(e, props, link)}\n        />\n      ))}\n    </Menu>\n  );\n};\n\nconst handleLinkClick = (\n  e: React.MouseEvent,\n  route: RouteComponentProps,\n  link: SubNavLink\n) => {\n  e.preventDefault();\n  route.history.push(link.to);\n};\n\nexport const SubNav = withRouter(Render);\n","import React, { SFC } from \"react\";\nimport \"./HeroIcon.scss\";\nimport { IHero, HeroRarity, IHeroData } from \"../../interfaces\";\nimport classNames from \"classnames\";\nimport { HERO_MAX_LEVEL } from \"../../constants\";\nimport { Stars, StarType } from \"../Common/Star\";\n\nconst getStarType = (h: { rarity: HeroRarity; awake: number }) => {\n  if (h.rarity === HeroRarity.N) {\n    return StarType.Blue;\n  } else if (h.rarity === HeroRarity.SP) {\n    return StarType.Purple;\n  } else {\n    return h.awake > 0 ? StarType.Purple : StarType.Orange;\n  }\n};\n\nexport interface IHeroIconItem {\n  id?: string;\n  hero_id: number;\n  level: number;\n  star: number;\n  rarity: HeroRarity;\n  awake: number;\n}\n\nexport const HeroIcon: SFC<{\n  hero: IHeroIconItem;\n  className?: string;\n  onClickHero?: (item: IHeroIconItem) => void;\n  childHeros?: IHero[];\n}> = props => {\n  const h = props.hero;\n  return (\n    <div\n      className={classNames(\n        \"hero-icon\",\n        `rarity-${h.rarity.toLowerCase()}`,\n        !props.childHeros && props.onClickHero && \"clickable\",\n        props.className\n      )}\n      key={h.id}\n      onClick={() => props.onClickHero && props.onClickHero(h)}\n    >\n      <img src={`/res/hero/${h.hero_id}.png`} />\n      <div className=\"level\">{h.level === HERO_MAX_LEVEL ? \"满\" : h.level}</div>\n      {props.childHeros && (\n        <div className=\"children-count\">\n          <span>{props.childHeros.length}</span>\n        </div>\n      )}\n      <div className=\"star-level\">\n        <Stars type={getStarType(h)} level={h.star} />\n      </div>\n      {h.awake > 0 && <div className=\"awake\">觉</div>}\n    </div>\n  );\n};\n\nexport const HeroDataIcon: SFC<{\n  data: IHeroData;\n  className?: string;\n}> = props => {\n  return (\n    <div\n      className={classNames(\n        \"hero-icon\",\n        `rarity-${props.data.rarity.toLowerCase()}`,\n        props.className\n      )}\n      key={props.data.id}\n    >\n      <img src={`/res/hero/${props.data.id}.png`} />\n      <div className=\"name\">{props.data.name}</div>\n    </div>\n  );\n};\n","export const HERO_MAX_LEVEL = 40;\n","import React, { SFC } from \"react\";\nimport \"./HeroGrid.scss\";\nimport { HeroIcon, IHeroIconItem } from \"./HeroIcon\";\nimport { IHero } from \"../../interfaces\";\n\nexport interface HeroGridProps {\n  items: (IHeroIconItem & { heroes?: IHero[] })[];\n  onClickHero: (item: IHeroIconItem) => void;\n}\n\nexport const HeroGrid: SFC<HeroGridProps> = props => {\n  return (\n    <div className=\"hero-grid\">\n      <div className=\"hero-grid-container\">\n        {props.items.map((i, idx) =>\n          i.heroes ? (\n            <HeroIcon\n              key={idx}\n              className=\"hero-grid-item\"\n              hero={i}\n              childHeros={i.heroes}\n            />\n          ) : (\n            <HeroIcon\n              key={idx}\n              className=\"hero-grid-item\"\n              hero={i}\n              onClickHero={props.onClickHero}\n            />\n          )\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { SFC } from \"react\";\nimport \"./Rarity.scss\";\nimport classNames from \"classnames\";\nimport { HeroRarity } from \"../../interfaces\";\n\nconst ClassNames = {\n  [HeroRarity.SP]: \"sp\",\n  [HeroRarity.SSR]: \"ssr\",\n  [HeroRarity.SR]: \"sr\",\n  [HeroRarity.R]: \"r\",\n  [HeroRarity.N]: \"n\"\n};\n\nexport const Rarity: SFC<{\n  rarity: HeroRarity;\n  className?: string;\n}> = props => {\n  return (\n    <i\n      className={classNames(\n        \"rarity\",\n        `rarity-${ClassNames[props.rarity]}`,\n        props.className\n      )}\n    />\n  );\n};\n","import React, { SFC } from \"react\";\nimport \"./Rating.scss\";\nimport classNames from \"classnames\";\nimport { Ratings } from \"../../interfaces\";\n\nexport interface RatingProps {\n  rating: Ratings;\n  className?: string;\n}\n\nexport const Rating: SFC<RatingProps> = props => {\n  return (\n    <i\n      className={classNames(\n        \"rating\",\n        `rating-${props.rating}`,\n        props.className\n      )}\n    />\n  );\n};\n","import React, { SFC } from \"react\";\nimport \"./EquipIcon.scss\";\nimport classNames from \"classnames\";\n\nexport const EquipIcon: SFC<{\n  suit_id: number;\n  pos: number;\n  className?: string;\n}> = props => {\n  const { suit_id, pos, className } = props;\n  return (\n    <div className={classNames(\"hero-equip-icon\", className)}>\n      <div className={classNames(\"icon\", `pos-${pos + 1}`)}>\n        <EquipTypeIcon id={suit_id} />\n      </div>\n    </div>\n  );\n};\n\nexport const EquipTypeIcon: SFC<{\n  id: number;\n  size?: number;\n  className?: string;\n}> = ({ id, size = 80, className }) => {\n  return (\n    <img\n      className={className}\n      src={`/res/suit/${id}.png`}\n      width={size}\n      height={size}\n    />\n  );\n};\n","import React, { SFC } from \"react\";\nimport \"./EquipDetail.scss\";\nimport { IHeroEquip, IHero, IHeroEquipPreset } from \"../../interfaces\";\nimport { EquipIcon } from \"./EquipIcon\";\nimport { Stars, StarType } from \"../Common/Star\";\nimport { formatEquipAttr } from \"../../modules/equip/attr\";\nimport { formatTimestamp } from \"../../utils\";\nimport { getEquipScoreData } from \"../../modules/equip/score\";\n\nexport const EquipDetail: SFC<{\n  equip: IHeroEquip;\n  equippedBy?: IHero;\n  presets?: IHeroEquipPreset[];\n}> = props => {\n  const { equip } = props;\n  const [baseAttrName, baseAttrValue] = formatEquipAttr(\n    equip.base_attr.type,\n    equip.base_attr.value\n  );\n\n  const scoreData = getEquipScoreData(equip);\n\n  return (\n    <div className=\"equip-detail\">\n      <header className=\"yyx-layout row\">\n        <div className=\"item icon\">\n          <EquipIcon suit_id={equip.suit_id} pos={equip.pos} />\n        </div>\n        <div className=\"item title\">\n          {equip.suit_data && equip.suit_data.name}\n          {equip.level > 0 && (\n            <>\n              &nbsp;<span>+{equip.level}</span>\n            </>\n          )}\n          <br />\n          <Stars type={StarType.Orange} level={equip.quality} />\n        </div>\n      </header>\n      <div className=\"attrs\">\n        <div className=\"yyx-layout row base-attr\">\n          <div className=\"name\">{baseAttrName}</div>\n          <div className=\"value\">+{baseAttrValue}</div>\n        </div>\n        {equip.random_attrs.map(attr => {\n          const [name, value] = formatEquipAttr(attr.type, attr.value);\n          return (\n            <div key={attr.type} className=\"yyx-layout row\">\n              <div className=\"name\">{name}</div>\n              <div className=\"value\">{value}</div>\n            </div>\n          );\n        })}\n        {equip.single_attrs.length ? (\n          <div className=\"single-attrs bp3-text-muted\">\n            {equip.single_attrs.map(attr => {\n              const [name, value] = formatEquipAttr(attr.type, attr.value);\n              return (\n                <div key={name} className=\"yyx-layout row\">\n                  <div className=\"name\">固有属性</div>\n                  <div className=\"value\">\n                    {name} {value}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        ) : null}\n      </div>\n      <div className=\"props\">\n        <div className=\"yyx-layout row\">\n          <div className=\"name\">ID</div>\n          <div className=\"value id\">{equip.id}</div>\n        </div>\n        {/* <div className=\"yyx-layout row\">\n          <a\n            href=\"http://nga.178.com/read.php?tid=15853326\"\n            target=\"_blank\"\n            className=\"name\"\n          >\n            副属性评分\n          </a>\n          <div className=\"value\">{scoreData ? scoreData.score : \"无\"}</div>\n        </div> */}\n        <div className=\"yyx-layout row\">\n          <div className=\"name\">获取时间</div>\n          <div className=\"value\">\n            {formatTimestamp(equip.timestamp_from_id)}\n          </div>\n        </div>\n        {equip.equipped_by && (\n          <div className=\"yyx-layout row\">\n            <div className=\"name\">装备式神</div>\n            <div className=\"value\">\n              {equip.equipped_by.nick_name ||\n                (equip.equipped_by.data && equip.equipped_by.data.name)}\n            </div>\n          </div>\n        )}\n        {equip.included_in_presets && (\n          <div className=\"yyx-layout row\">\n            <div className=\"name\">所属方案</div>\n            <div className=\"value\">\n              <ul className=\"preset-list\">\n                {equip.included_in_presets.map((p, i) => (\n                  <li key={i}>{p.name}</li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { SFC, useState } from \"react\";\nimport \"./EquipItem.scss\";\nimport { IHeroEquip } from \"../../interfaces\";\nimport classNames from \"classnames\";\nimport { Stars, StarType } from \"../Common/Star\";\nimport { Popover, Classes } from \"@blueprintjs/core\";\nimport { EquipDetail } from \"./EquipDetail\";\n\nexport const EquipItem: SFC<{\n  equip: IHeroEquip;\n  className?: string;\n  minimal?: boolean;\n  onClickEquip?: (equip: IHeroEquip) => void;\n}> = props => {\n  const { equip, className } = props;\n  return (\n    <Popover\n      content={<EquipDetail equip={equip} />}\n      minimal\n      popoverClassName={classNames(Classes.POPOVER_CONTENT_SIZING)}\n      portalClassName=\"hero-equip-item-popover\"\n    >\n      <div\n        className={classNames(\n          \"hero-equip-item\",\n          props.onClickEquip && \"clickable\",\n          equip.garbage && \"trashed\",\n          props.minimal && \"minimal\",\n          className\n        )}\n        onClick={() => props.onClickEquip && props.onClickEquip(equip)}\n      >\n        {equip.level > 0 && <label>+{equip.level}</label>}\n        {equip.equipped_by && <div className=\"equipped\">装备</div>}\n        <div className=\"stars\">\n          <Stars type={StarType.Orange} level={equip.quality} />\n        </div>\n        <div className={classNames(\"icon\", `pos-${equip.pos + 1}`)}>\n          <img src={`/res/suit/${equip.suit_id}.png`} />\n        </div>\n      </div>\n    </Popover>\n  );\n};\n","import React, { SFC, useState, useEffect } from \"react\";\nimport classNames from \"classnames\";\nimport \"./EquipSet.scss\";\nimport { IHeroEquip } from \"../../interfaces\";\nimport { EquipItem } from \"./EquipItem\";\nimport { Popover, Classes, PopperModifiers } from \"@blueprintjs/core\";\nimport { EquipDetail } from \"./EquipDetail\";\n\nexport const EquipSet: SFC<{\n  className?: string;\n  equips: IHeroEquip[];\n}> = props => {\n  const [items, setItems] = useState<(IHeroEquip | null)[]>([]);\n\n  useEffect(() => {\n    const list = new Array(6).fill(null);\n    for (let equip of equips) {\n      list[equip.pos] = equip;\n    }\n    setItems(list);\n  }, [props.equips]);\n\n  const { equips } = props;\n\n  return (\n    <div className=\"equip-set\">\n      {items.map(i => {\n        return (\n          i && (\n            <div key={i.id} className={`equip-set-item pos-${i.pos + 1}`}>\n              <EquipItem minimal equip={i} />\n            </div>\n          )\n        );\n      })}\n    </div>\n  );\n};\n","import { connect } from \"react-redux\";\nimport { ReactElement, SFC } from \"react\";\nimport { IYyxState } from \"../../store\";\nimport { IHeroEquip } from \"../../interfaces\";\nimport { EquipSelectors } from \"../../modules/equip\";\n\ninterface RenderProps {\n  equips: IHeroEquip[];\n  render: (equips: IHeroEquip[]) => ReactElement | null;\n}\n\nconst Render: SFC<RenderProps> = (props: RenderProps) => {\n  return props.render(props.equips);\n};\n\nexport interface EquipsProps {\n  ids: string[];\n  render: (equips: IHeroEquip[]) => ReactElement | null;\n}\n\nexport const Equips = connect((state: IYyxState, props: EquipsProps) => {\n  const maps = EquipSelectors.selectMaps(state);\n  return {\n    equips:\n      maps && maps.id\n        ? (props.ids\n            .map(id => maps.id.get(id))\n            .filter(v => !!v) as IHeroEquip[])\n        : [],\n    render: props.render\n  };\n})(Render);\n","import React, { SFC } from \"react\";\nimport \"./HeroDetail.scss\";\nimport {\n  IHero,\n  IHeroAttrRating,\n  IHeroAttrs,\n  IHeroAttr\n} from \"../../interfaces\";\nimport { HeroIcon } from \"./HeroIcon\";\nimport { Rarity } from \"../Common/Rarity\";\nimport classNames from \"classnames\";\nimport { Rating } from \"../Common/Rating\";\nimport { AttrValueType, formatAttrValue, formatTimestamp } from \"../../utils\";\nimport { Divider } from \"@blueprintjs/core\";\nimport { EquipSet } from \"../Equip/EquipSet\";\nimport { Equips } from \"../Equip/Equips\";\n\nconst renderIconName = (hero: IHero) => (\n  <div className=\"icon-name yyx-layout row\">\n    <div className=\"icon item\">\n      <HeroIcon hero={hero} />\n    </div>\n    <div className=\"name item yyx-layout column\">\n      <div className=\"yyx-layout row yyx-space-v\">\n        <Rarity rarity={hero.rarity} className=\"item\" />\n        <div className=\"item hero\" style={{ flex: \"0 0 auto\" }}>\n          {hero.data && hero.data.name}\n        </div>\n      </div>\n      {hero.nick_name && <div>昵称: {hero.nick_name}</div>}\n    </div>\n  </div>\n);\n\nconst attrs: Array<[string, string, string, AttrValueType]> = [\n  [\"attack\", \"攻击\", \"attack\", AttrValueType.Float],\n  [\"max_hp\", \"生命\", \"max-hp\", AttrValueType.Float],\n  [\"defense\", \"防御\", \"defense\", AttrValueType.Float],\n  [\"speed\", \"速度\", \"speed\", AttrValueType.Float],\n  [\"crit_rate\", \"暴击\", \"crit-rate\", AttrValueType.Percentage]\n];\n\nconst renderAttrs = (hero: IHero, ratings: IHeroAttrRating) => (\n  <div className=\"attrs yyx-layout column\">\n    {attrs.map(([key, label, className, type]) => {\n      const attr = hero.attrs[key as keyof IHeroAttrs] as IHeroAttr;\n      return (\n        <div key={key} className=\"yyx-layout row\">\n          <i className={classNames(\"attr-icon item yyx-space-h\", className)} />\n          <Rating\n            className=\"item rating\"\n            rating={ratings[key as keyof IHeroAttrRating]}\n          />\n          <span className=\"item label\">{label}</span>\n          <span className=\"item attr-value\">\n            {formatAttrValue(attr.base, type)}\n            {attr.value > attr.base && (\n              <span className=\"plus-value\">\n                +{formatAttrValue(attr.value - attr.base, type)}\n              </span>\n            )}\n          </span>\n        </div>\n      );\n    })}\n    <div className=\"yyx-layout row\">\n      <span className=\"item label\">暴击伤害</span>\n      <span className=\"item attr-value\">\n        {formatAttrValue(\n          1 + hero.attrs.crit_power.value,\n          AttrValueType.Percentage\n        )}\n      </span>\n    </div>\n    <div className=\"yyx-layout row\">\n      <span className=\"item label\">效果命中</span>\n      <span className=\"item attr-value\">\n        {formatAttrValue(\n          1 + hero.attrs.effect_hit_rate - 1,\n          AttrValueType.Percentage\n        )}\n      </span>\n    </div>\n    <div className=\"yyx-layout row yyx-space-v\">\n      <span className=\"item label\">效果抵抗</span>\n      <span className=\"item attr-value\">\n        {formatAttrValue(\n          1 + hero.attrs.effect_resist_rate - 1,\n          AttrValueType.Percentage\n        )}\n      </span>\n    </div>\n    <div className=\"yyx-layout row\">\n      <span className=\"item label\">攻击 x 暴伤</span>\n      <span className=\"item attr-value\">\n        {formatAttrValue(\n          hero.attrs.attack.value * (1 + hero.attrs.crit_power.value)\n        )}\n      </span>\n    </div>\n    <div className=\"yyx-layout row\">\n      <span className=\"item label\">生命 x 暴伤</span>\n      <span className=\"item attr-value\">\n        {formatAttrValue(\n          hero.attrs.max_hp.value * (1 + hero.attrs.crit_power.value)\n        )}\n      </span>\n    </div>\n    <div className=\"yyx-layout row\">\n      <span className=\"item label\">获取时间</span>\n      <span className=\"item attr-value\">\n        {formatTimestamp(hero.timestamp_from_id)}\n      </span>\n    </div>\n  </div>\n);\n\nexport const HeroDetail: SFC<{\n  hero: IHero;\n}> = props => {\n  const { hero } = props;\n\n  if (!hero.data) {\n    return null;\n  }\n\n  const ratings =\n    hero.awake > 0\n      ? hero.data.attr_rating.awake\n      : hero.data.attr_rating.unawake;\n\n  return (\n    <div className=\"hero-detail yyx-layout row\">\n      <div className=\"item\">\n        {renderIconName(hero)}\n        {renderAttrs(hero, ratings)}\n      </div>\n      <div className=\"item equips\">\n        <Equips\n          ids={hero.equips}\n          render={equips => <EquipSet equips={equips} />}\n        />\n      </div>\n    </div>\n  );\n};\n","import React, { SFC, useRef } from \"react\";\nimport \"./HeroDetailOverlay.scss\";\nimport { IHero } from \"../../interfaces\";\nimport { Overlay } from \"@blueprintjs/core\";\nimport { HeroDetail } from \"./HeroDetail\";\nimport { getHeroData } from \"../../modules/hero/data\";\n\nexport interface HeroDetailOverlayProps {\n  hero: IHero | null;\n  onClose: () => void;\n}\n\nexport const HeroDetailOverlay: SFC<HeroDetailOverlayProps> = props => {\n  const contentEl = useRef<HTMLDivElement>(null);\n\n  return (\n    <Overlay\n      className=\"hero-detail-overlay\"\n      backdropClassName=\"hero-detail-overlay-backdrop\"\n      isOpen={!!props.hero}\n      onClose={() => {\n        if (contentEl.current) {\n          contentEl.current.classList.add(\"closing\");\n        }\n        props.onClose();\n      }}\n    >\n      {props.hero && (\n        <div ref={contentEl} className=\"content\">\n          <div style={{ flex: \"0 0 auto\" }}>\n            <HeroDetail hero={props.hero} />\n          </div>\n          {/* <pre\n            style={{ height: 400, maxWidth: 600, overflow: \"auto\", flex: \"1\" }}\n          >\n            {JSON.stringify(props.hero, null, \"  \")}\n          </pre> */}\n        </div>\n      )}\n    </Overlay>\n  );\n};\n","// https://dev.to/gabe_ragland/debouncing-with-react-hooks-jci\n\nimport React, { useState, useEffect } from \"react\";\n\n// Our hook\nexport function useDebounce<T>(value: T, delay: number) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    // Set debouncedValue to value (passed in) after the specified delay\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    // Return a cleanup function that will be called every time ...\n    // ... useEffect is re-called. useEffect will only be re-called ...\n    // ... if value changes (see the inputs array below).\n    // This is how we prevent debouncedValue from changing if value is ...\n    // ... changed within the delay period. Timeout gets cleared and restarted.\n    // To put it in context, if the user is typing within our app's ...\n    // ... search box, we don't want the debouncedValue to update until ...\n    // ... they've stopped typing for more than 500ms.\n    return () => {\n      clearTimeout(handler);\n    };\n  }, // Only re-call effect if value changes\n  // You could also add the \"delay\" var to inputs array if you ...\n  // ... need to be able to change that dynamically.\n  [value]);\n\n  return debouncedValue;\n}\n","import React, { SFC, useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { IHero, HeroRarity } from \"../../interfaces\";\nimport { IYyxState, IDispatch } from \"../../store\";\nimport { HeroGrid } from \"./HeroGrid\";\nimport { HeroDetailOverlay } from \"./HeroDetailOverlay\";\nimport {\n  HeroSelectors,\n  RarityOption,\n  IHeroFolded,\n  IHeroListOptions,\n  HeroActions,\n  ActionType\n} from \"../../modules/hero\";\nimport { Card, Switch, Button, MenuItem, InputGroup } from \"@blueprintjs/core\";\nimport { Select, ItemRenderer } from \"@blueprintjs/select\";\nimport { Rarity } from \"../Common/Rarity\";\nimport { useDebounce } from \"../../hooks/debounce\";\n\nconst RaritySelect = Select.ofType<RarityOption>();\nconst RarityOptions = [\n  \"*\",\n  HeroRarity.SP,\n  HeroRarity.SSR,\n  HeroRarity.SR,\n  HeroRarity.R,\n  HeroRarity.N,\n  \"M\"\n] as Array<RarityOption>;\n\nconst getRarityElem = (option: RarityOption) => {\n  let elem;\n  if (option === \"M\") {\n    elem = \"素材\";\n  } else if (option === \"*\") {\n    elem = \"全部\";\n  } else {\n    elem = <Rarity rarity={option} />;\n  }\n  return elem;\n};\n\nconst renderRarityOption: ItemRenderer<RarityOption> = (option, params) => {\n  let text = getRarityElem(option);\n  return (\n    <MenuItem\n      key={option}\n      text={text}\n      onClick={params.handleClick}\n      active={params.modifiers.active}\n    />\n  );\n};\n\nconst StarSelect = Select.ofType<number>();\nconst StarOptions = [0, 6, 5, 4, 3, 2];\nconst renderStarOption: ItemRenderer<number> = (option, params) => {\n  let text;\n  if (option === 0) {\n    text = \"全部\";\n  } else {\n    text = `${option}星`;\n  }\n  return (\n    <MenuItem\n      key={option}\n      text={text}\n      onClick={params.handleClick}\n      active={params.modifiers.active}\n    />\n  );\n};\n\nconst Render: SFC<{\n  heroes: (IHero | IHeroFolded)[] | null;\n  count: number;\n  mapById: Map<string, IHero> | null;\n  dispatch: IDispatch;\n}> = props => {\n  const { dispatch } = props;\n\n  const [activeHero, setActiveHero] = useState<IHero | null>(null);\n  const [fold, setFold] = useState(true);\n  const [rarity, setRarity] = useState<RarityOption>(\"*\");\n  const [star, setStar] = useState(0);\n  const [term, setTerm] = useState(\"\");\n  const debouncedTerm = useDebounce(term, 300);\n\n  // useEffect(() => {\n  //   if (props.heroes) {\n  //     setActiveHero(\n  //       (props.heroes.find(\n  //         i => \"id\" in i && i.id === \"5c3b92123938a33e4fa654e1\"\n  //       ) as IHero) || null\n  //     );\n  //   }\n  // }, [props.heroes]);\n\n  useEffect(() => {\n    dispatch(\n      HeroActions.setListOptions({\n        fold: fold && !debouncedTerm,\n        rarity,\n        star,\n        term: debouncedTerm\n      })\n    );\n  }, [fold, rarity, star, debouncedTerm]);\n\n  if (!props.heroes) {\n    return null;\n  }\n\n  return (\n    <>\n      <HeroDetailOverlay\n        hero={activeHero}\n        onClose={() => setActiveHero(null)}\n      />\n      <Card className=\"yyx-space-v yyx-layout wrap row yyx-options\">\n        <div className=\"item\">\n          <InputGroup\n            leftIcon=\"filter\"\n            placeholder=\"搜索式神名称/昵称...\"\n            value={term}\n            onChange={(e: any) => setTerm(e.target.value)}\n          />\n        </div>\n        <div className=\"item\">\n          <RaritySelect\n            filterable={false}\n            items={RarityOptions}\n            itemRenderer={renderRarityOption}\n            onItemSelect={item => {\n              setRarity(item);\n            }}\n          >\n            <Button>\n              <div className=\"yyx-layout row\">\n                稀有度: {getRarityElem(rarity)}\n              </div>\n            </Button>\n          </RaritySelect>\n        </div>\n        <div className=\"item\">\n          <StarSelect\n            filterable={false}\n            items={StarOptions}\n            itemRenderer={renderStarOption}\n            onItemSelect={item => setStar(item)}\n          >\n            <Button>星级: {star ? `${star}星` : \"全部\"}</Button>\n          </StarSelect>\n        </div>\n        <div style={{ flex: 1 }}>数量: {props.count}</div>\n        <div className=\"item\">\n          <Switch\n            checked={fold}\n            onChange={() => setFold(!fold)}\n            className=\"item\"\n            label=\"折叠\"\n          />\n        </div>\n      </Card>\n      <HeroGrid\n        items={props.heroes}\n        onClickHero={item => {\n          item.id &&\n            setActiveHero(\n              (props.mapById && props.mapById.get(item.id)) || null\n            );\n          console.log(item);\n        }}\n      />\n    </>\n  );\n};\n\nexport const HeroList = connect((state: IYyxState) => ({\n  heroes: HeroSelectors.selectList(state),\n  count: HeroSelectors.selectCount(state),\n  mapById: HeroSelectors.selectMapById(state)\n}))(Render);\n","import { createSelector } from \"reselect\";\nimport { IHeroBookShard } from \"../../interfaces\";\nimport { SnapshotSelectors } from \"../snapshot\";\nimport { sortDesc, combineSorters } from \"../../utils\";\nimport { getHeroData, RarityRank } from \"../hero/data\";\n\nconst selectAll = createSelector(\n  SnapshotSelectors.selectCurrentSnapshot,\n  snapshot => {\n    if (!snapshot) {\n      return null;\n    }\n    return snapshot.data.hero_book_shards.map(i => {\n      i.hero_data = getHeroData(i.hero_id);\n      return i;\n    });\n  }\n);\n\nconst getRarityRank = (s: IHeroBookShard) =>\n  s.hero_data ? RarityRank[s.hero_data.rarity] : 999;\n\nconst defaultSorter = combineSorters<IHeroBookShard>(\n  sortDesc((a, b) => getRarityRank(a) - getRarityRank(b)),\n  sortDesc((a, b) => a.hero_id - b.hero_id)\n);\n\nconst selectSorted = createSelector(\n  selectAll,\n  items => {\n    if (!items) {\n      return null;\n    }\n\n    return items\n      .slice()\n      .filter(i => i.shards > 0 || i.books > 0)\n      .sort(defaultSorter);\n  }\n);\n\nexport const ShardSelectors = {\n  selectSorted\n};\n","import React, { SFC, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { IYyxState } from \"../../../store\";\nimport { ShardSelectors } from \"../../../modules/shard\";\nimport { IHeroBookShard } from \"../../../interfaces\";\nimport { Rarity } from \"../../Common/Rarity\";\n\nconst Render: SFC<{\n  items: IHeroBookShard[] | null;\n}> = props => {\n  if (!props.items) {\n    return null;\n  }\n\n  return (\n    <>\n      <table className=\"bp3-html-table bp3-html-table-striped\">\n        <thead>\n          <tr>\n            <th>式神</th>\n            <th>拥有碎片</th>\n            <th>所需碎片</th>\n          </tr>\n        </thead>\n        <tbody>\n          {props.items.map(\n            i =>\n              i.hero_data && (\n                <tr key={i.hero_id}>\n                  <td\n                    className=\"yyx-layout row\"\n                    style={{ justifyContent: \"flex-start\" }}\n                  >\n                    <Rarity\n                      rarity={i.hero_data.rarity}\n                      className=\"yyx-space-h\"\n                    />\n                    {i.hero_data.name}\n                  </td>\n                  <td>{i.shards + i.books * i.book_max_shards}</td>\n                  <td>{i.book_max_shards}</td>\n                </tr>\n              )\n          )}\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nexport const ShardPage = connect((state: IYyxState) => ({\n  items: ShardSelectors.selectSorted(state)\n}))(Render);\n","import SKILL_LEVEL_DATA from \"./SKILL_LEVEL_DATA.json\";\nimport { number } from \"prop-types\";\nimport { computeOnce } from \"../../utils\";\n\nexport const getSkillMaxLevelMap = computeOnce(() => {\n  return SKILL_LEVEL_DATA.reduce((m, i) => {\n    m.set(i[0], i[2]);\n    return m;\n  }, new Map<number, number>());\n});\n","import React, { SFC, useState } from \"react\";\nimport \"./SkillPage.scss\";\nimport { connect } from \"react-redux\";\nimport { IYyxState } from \"../../../store\";\nimport {\n  IHeroBookShard,\n  IHeroData,\n  HeroRarity,\n  IHero\n} from \"../../../interfaces\";\nimport { ALL_HERO_DATA, RarityRank } from \"../../../modules/hero/data\";\nimport { HeroDataIcon } from \"../HeroIcon\";\nimport { computeOnce } from \"../../../utils\";\nimport { getSkillMaxLevelMap } from \"../../../modules/skill/data\";\nimport { HeroSelectors } from \"../../../modules/hero\";\nimport { Icon } from \"@blueprintjs/core\";\n\ninterface Item {\n  data: IHeroData;\n  all_skills: number[];\n  skill_max_levels: number[];\n}\n\nconst getDataList = computeOnce<Item[]>(() => {\n  const SkillMaxLevelMap = getSkillMaxLevelMap();\n  return ALL_HERO_DATA.filter(\n    i => RarityRank[i.rarity] >= RarityRank[HeroRarity.SR]\n  )\n    .sort((a, b) => -(RarityRank[a.rarity] - RarityRank[b.rarity]))\n    .map(data => {\n      const all_skills = [\n        ...data.skills,\n        ...(data.awake_skill ? [data.awake_skill] : [])\n      ].sort();\n      return {\n        data,\n        all_skills,\n        skill_max_levels: all_skills.map(s => SkillMaxLevelMap.get(s) || 0)\n      };\n    });\n});\n\nconst formatUpgrade = (hero: IHero, item: Item) => {\n  let done = true;\n  const numbers = item.all_skills.map((s, i) => {\n    const skill = hero.skills.find(skill => skill.id === s);\n    const max = item.skill_max_levels[i];\n    const level = skill ? skill.level : 1;\n    const color =\n      level === max ? \"#0A6640\" : level === 1 ? \"#BFCCD6\" : \"#FFC940\";\n    done = done && level === max;\n    return (\n      <span key={s} style={{ color }}>\n        {level}\n      </span>\n    );\n  });\n  return <div className=\"levels\">{numbers}</div>;\n};\n\nconst Render: SFC<{\n  heroesMap: Map<number, IHero[]> | null;\n}> = props => {\n  if (!props.heroesMap) {\n    return null;\n  }\n\n  return (\n    <>\n      <table className=\"bp3-html-table bp3-html-table-striped skill-table\">\n        <thead>\n          <tr>\n            <th>式神</th>\n            <th>技能最大等级</th>\n            <th>升级</th>\n          </tr>\n        </thead>\n        <tbody>\n          {getDataList().map(i => {\n            const heroes =\n              (props.heroesMap && props.heroesMap.get(i.data.id)) || [];\n            return (\n              <tr key={i.data.id}>\n                <td>\n                  <HeroDataIcon data={i.data} />\n                </td>\n                <td>\n                  <div className=\"levels big\">\n                    {i.skill_max_levels.map((l, i) => (\n                      <span key={i}>{l}</span>\n                    ))}\n                  </div>\n                </td>\n                <td>\n                  {heroes.length ? (\n                    <ul className=\"bp3-list bp3-list-unstyled\">\n                      {heroes.map(h => (\n                        <li key={h.id}>{formatUpgrade(h, i)}</li>\n                      ))}\n                    </ul>\n                  ) : (\n                    <span className=\"bp3-text-muted\">未获取</span>\n                  )}\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </>\n  );\n};\n\nexport const SkillPage = connect((state: IYyxState) => ({\n  heroesMap: HeroSelectors.selectMapByHeroId(state)\n}))(Render);\n","import { IStoryTaskData, IHeroStoryTaskData } from \"../../interfaces\";\nimport { computeOnce } from \"../../utils\";\n\nexport const DATA: IHeroStoryTaskData[] = require(\"./STORY_TASK_DATA.json\");\n\nexport const getStoryTaskMap = computeOnce(() => {\n  return DATA.reduce((m, i) => {\n    m.set(i.hero_id, i.tasks.slice(0, 3));\n    return m;\n  }, new Map<number, IStoryTaskData[]>());\n});\n","import { createSelector } from \"reselect\";\nimport { SnapshotSelectors } from \"../snapshot\";\n\nconst selectProgressMap = createSelector(\n  SnapshotSelectors.selectCurrentSnapshot,\n  s => {\n    if (!s) {\n      return null;\n    }\n    return s.data.story_tasks.reduce((m, i) => {\n      m.set(i.id, [i.progress.value, i.progress.max_value]);\n      return m;\n    }, new Map<number, [number, number]>());\n  }\n);\n\nexport const StorySelectors = {\n  selectProgressMap\n};\n","import React, { SFC, useState } from \"react\";\nimport \"./StoryPage.scss\";\nimport { connect, useSelector } from \"react-redux\";\nimport { IYyxState } from \"../../../store\";\nimport {\n  IHeroBookShard,\n  IHeroData,\n  HeroRarity,\n  IHero,\n  IStoryTask,\n  IStoryTaskData\n} from \"../../../interfaces\";\nimport { ALL_HERO_DATA, RarityRank } from \"../../../modules/hero/data\";\nimport { HeroDataIcon } from \"../HeroIcon\";\nimport { computeOnce } from \"../../../utils\";\nimport { HeroSelectors } from \"../../../modules/hero\";\nimport { Icon } from \"@blueprintjs/core\";\nimport { getStoryTaskMap } from \"../../../modules/story/data\";\nimport { StorySelectors } from \"../../../modules/story\";\n\ninterface Item {\n  data: IHeroData;\n  tasks: IStoryTaskData[];\n}\n\nconst getDataList = computeOnce<Item[]>(() => {\n  const TaskMap = getStoryTaskMap();\n  return ALL_HERO_DATA.sort(\n    (a, b) => -(RarityRank[a.rarity] - RarityRank[b.rarity])\n  )\n    .map(data => {\n      return {\n        data,\n        tasks: TaskMap.get(data.id) || []\n      };\n    })\n    .filter(i => i.tasks.length > 0);\n});\n\nconst formatProgress = (v: number, max: number) => {\n  const color = v === max ? \"#0A6640\" : v === 0 ? \"#BFCCD6\" : \"#FFC940\";\n  return (\n    <strong style={{ color }}>\n      {v} / {max}\n    </strong>\n  );\n};\n\nexport const StoryPage = () => {\n  const progressMap = useSelector(StorySelectors.selectProgressMap);\n  const items = React.useMemo(() => {\n    if (!progressMap) {\n      return null;\n    }\n    return getDataList().map(item => {\n      const taskStatus = item.tasks.map(t => {\n        const [v, max_v] = progressMap.get(t.id) || [0, t.cond_var];\n        return {\n          id: t.id,\n          v,\n          max_v\n        };\n      });\n      return {\n        ...item,\n        taskTotal: taskStatus.length,\n        taskDone: taskStatus.filter(s => s.v >= s.max_v).length,\n        vTotal: taskStatus.map(s => s.max_v).reduce((t, v) => t + v, 0),\n        vDone: taskStatus.map(s => s.v).reduce((t, v) => t + v, 0)\n      };\n    });\n  }, [progressMap]);\n\n  if (!progressMap || !items) {\n    return null;\n  }\n\n  return (\n    <>\n      <table className=\"bp3-html-table bp3-html-table-striped story-table\">\n        <thead>\n          <tr>\n            <th>式神</th>\n            <th>传记</th>\n            <th>完成度</th>\n          </tr>\n        </thead>\n        <tbody>\n          {items.map(i => {\n            return (\n              <tr key={i.data.id}>\n                <td>\n                  <HeroDataIcon data={i.data} />\n                </td>\n                <td>\n                  <ul className=\"task-list\">\n                    {i.tasks.map((t, i) => {\n                      const [v, max] = progressMap.get(t.id);\n                      return (\n                        <li key={i}>\n                          {t.content} ({formatProgress(v, max)})\n                        </li>\n                      );\n                    })}\n                  </ul>\n                </td>\n                <td>\n                  {formatProgress(i.taskDone, i.taskTotal)}\n                  <br />\n                  <small>{formatProgress(i.vDone, i.vTotal)}</small>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </>\n  );\n};\n","import React, { SFC } from \"react\";\nimport { SubNav, SubNavLink } from \"../Common/SubNav\";\nimport { HeroList } from \"./HeroList\";\nimport { Route } from \"react-router\";\nimport { ShardPage } from \"./Shard/ShardPage\";\nimport { SkillPage } from \"./Skill/SkillPage\";\nimport { StoryPage } from \"./Story/StoryPage\";\n\nconst SubPages: (SubNavLink & { component: any })[] = [\n  {\n    label: \"式神列表\",\n    to: \"/hero\",\n    component: HeroList\n  },\n  {\n    label: \"碎片\",\n    to: \"/hero/shard\",\n    component: ShardPage\n  },\n  {\n    label: \"技能升级\",\n    to: \"/hero/skill\",\n    component: SkillPage\n  },\n  {\n    label: \"传记解锁\",\n    to: \"/hero/story\",\n    component: StoryPage\n  }\n];\n\nexport const HeroPage: SFC = props => {\n  return (\n    <div className=\"yyx-full-height yyx-layout row\">\n      <div className=\"item yyx-nav-left\">\n        <SubNav links={SubPages} />\n      </div>\n      <div className=\"item yyx-content yyx-content-scroll\">\n        <div className=\"yyx-padding\">\n          {SubPages.map(page => (\n            <Route\n              key={page.to}\n              path={page.to}\n              exact={page.to === \"/hero\"}\n              component={page.component}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { SFC } from \"react\";\nimport \"./EquipGrid.scss\";\nimport { IHeroEquip } from \"../../interfaces\";\nimport { EquipItem } from \"./EquipItem\";\n\nexport interface EquipGridProps {\n  items: IHeroEquip[];\n  onClickEquip?: (equip: IHeroEquip) => void;\n}\n\nexport const EquipGrid: SFC<EquipGridProps> = props => {\n  return (\n    <div className=\"hero-equip-grid\">\n      <div className=\"hero-equip-grid-container\">\n        {props.items.map(i => (\n          <EquipItem\n            key={i.id}\n            className=\"hero-equip-grid-item\"\n            equip={i}\n            onClickEquip={props.onClickEquip}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React, { SFC, useState, useEffect } from \"react\";\nimport \"./EquipTypeSelector.scss\";\n\nimport {\n  Button,\n  MenuItem,\n  Dialog,\n  Classes,\n  Intent,\n  Tag,\n  Icon\n} from \"@blueprintjs/core\";\nimport { IHeroEquipSuitData } from \"../../interfaces\";\nimport { ALL_SUIT_DATA, getEquipSuiteData } from \"../../modules/equip/data\";\nimport { EquipTypeIcon } from \"./EquipIcon\";\nimport { getEquipSuitAttrName } from \"../../modules/equip/attr\";\n\nexport interface EquipTypeSelectorProps {\n  value?: IHeroEquipSuitData;\n  onChange?: (suitId: number) => void;\n}\n\nexport const EquipTypeSelector: SFC<EquipTypeSelectorProps> = props => {\n  return null;\n};\n\nexport interface EquipTypeMultiSelectorProps {\n  className?: string;\n  value?: number[];\n  onChange?: (suitIds: number[]) => void;\n}\n\n// const renderEquipType: ItemRenderer<IHeroEquipSuitData> = (option, params) => {\n//   return (\n//     <MenuItem\n//       key={option.id}\n//       text={option.name}\n//       onClick={params.handleClick}\n//       active={params.modifiers.active}\n//       labelElement={<EquipTypeIcon id={option.id} />}\n//     />\n//   );\n// };\n\nconst renderEquipTypeTag = (i: IHeroEquipSuitData) => {\n  return null;\n};\n\nconst EquipTypeDialog: SFC<{\n  multiple: boolean;\n  selected: number[];\n  setIdSelected: (id: number, selected: boolean) => void;\n  isOpen: boolean;\n  onOk: () => void;\n  onCancel: () => void;\n}> = props => {\n  return (\n    <Dialog isOpen={props.isOpen} onClose={() => props.onCancel()}>\n      <div className={Classes.DIALOG_BODY}>\n        <ul className=\"equip-type-dialog-type-list\">\n          {ALL_SUIT_DATA.map(i => {\n            const selected = props.selected.includes(i.id);\n            return (\n              <li\n                className={selected ? \"selected\" : \"\"}\n                key={i.id}\n                onClick={() => props.setIdSelected(i.id, !selected)}\n              >\n                <div className=\"content\">\n                  <EquipTypeIcon id={i.id} size={50} />\n                  <div className=\"description\">\n                    <span className=\"name\">{i.name}</span>\n                    <br />\n                    <Tag>{getEquipSuitAttrName(i)}</Tag>\n                  </div>\n                </div>\n                <div className=\"tick\">\n                  <Icon icon=\"small-tick\" />\n                </div>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n      <div className={Classes.DIALOG_FOOTER}>\n        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n          <Button onClick={() => props.onCancel()}>取消</Button>\n          <Button intent={Intent.PRIMARY} onClick={() => props.onOk()}>\n            确定\n          </Button>\n        </div>\n      </div>\n    </Dialog>\n  );\n};\n\nconst EmptyList: number[] = [];\n\nconst renderTypeList = (ids: number[]) => {\n  return (\n    <ul className=\"bp3-list-unstyled icon-list\">\n      {ids.map(id => {\n        return (\n          <li key={id}>\n            <EquipTypeIcon id={id} size={24} />\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nexport const EquipTypeMultiSelector: SFC<\n  EquipTypeMultiSelectorProps\n> = props => {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [dialogSelected, setDialogSelected] = useState(EmptyList);\n  const [selected, setSelected] = useState(props.value || EmptyList);\n\n  return (\n    <div className={props.className}>\n      <EquipTypeDialog\n        isOpen={dialogOpen}\n        onCancel={() => {\n          setDialogOpen(false);\n        }}\n        onOk={() => {\n          setDialogOpen(false);\n          setSelected(dialogSelected);\n          if (props.onChange) {\n            props.onChange(dialogSelected);\n          }\n        }}\n        multiple\n        selected={dialogSelected}\n        setIdSelected={(id, idSelected) => {\n          setDialogSelected(\n            idSelected\n              ? [...dialogSelected.filter(v => v !== id), id]\n              : dialogSelected.filter(v => v !== id)\n          );\n        }}\n      />\n      <Button\n        className=\"equip-type-selector-button\"\n        onClick={() => {\n          setDialogSelected(selected);\n          setDialogOpen(true);\n        }}\n      >\n        <div className=\"yyx-layout row wrap\">\n          {selected.length ? renderTypeList(selected) : <span>全部</span>}\n        </div>\n      </Button>\n    </div>\n  );\n};\n","import React, { SFC, useState, useEffect } from \"react\";\nimport classNames from \"classnames\";\nimport \"./EquipPosition.scss\";\n\nconst Labels = [\"\", \"壹\", \"贰\", \"叁\", \"肆\", \"伍\", \"陆\"];\n\nexport const EquipPosition: SFC<{\n  className?: string;\n  labelElement?: (pos: number) => React.ReactNode;\n  position: number;\n  active?: boolean;\n  onClick?: (pos: number) => void;\n}> = props => {\n  return (\n    <div\n      className={classNames(\n        \"equip-position\",\n        `pos-${props.position}`,\n        props.onClick && \"clickable\",\n        props.active && \"active\",\n        props.className\n      )}\n      onClick={() => props.onClick && props.onClick(props.position)}\n    >\n      <div className=\"content\">\n        {props.labelElement ? (\n          props.labelElement(props.position)\n        ) : (\n          <div className=\"equip-position-text\">{Labels[props.position]}</div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { HttpClient } from \"../http\";\n\nexport function exportJson(filename: string, value: any) {\n  return HttpClient.post<string>(\"/api/export/json\", value, {\n    params: {\n      filename\n    }\n  }).then(res => res.data);\n}\n","import {\n  IHeroEquip,\n  HeroEquipAttrType,\n  ISnapshot,\n  IHeroEquipSuitData\n} from \"../../interfaces\";\nconst DATA = require(\"./EQUIP_SUIT_DATA.json\");\n\nexport const ALL_SUIT_DATA: IHeroEquipSuitData[] = DATA;\nexport interface Ocr2Item {\n  御魂ID: string;\n  御魂等级: number;\n  御魂星级: number;\n  御魂类型: string;\n  位置: number;\n  生命?: number;\n  防御?: number;\n  攻击?: number;\n  生命加成?: number;\n  防御加成?: number;\n  攻击加成?: number;\n  速度?: number;\n  暴击?: number;\n  暴击伤害?: number;\n  效果命中?: number;\n  效果抵抗?: number;\n}\n\nconst AttrNameMap = {\n  Hp: \"生命\",\n  Defense: \"防御\",\n  Attack: \"攻击\",\n  HpRate: \"生命加成\",\n  DefenseRate: \"防御加成\",\n  AttackRate: \"攻击加成\",\n  Speed: \"速度\",\n  CritRate: \"暴击\",\n  CritPower: \"暴击伤害\",\n  EffectHitRate: \"效果命中\",\n  EffectResistRate: \"效果抵抗\"\n};\n\nconst SuitMap: { [id: string]: string } = ALL_SUIT_DATA.reduce(\n  (map, i) => {\n    map[String(i.id)] = i.name;\n    return map;\n  },\n  {} as { [id: string]: string }\n);\n\nexport function equipsToOcr2(\n  equips: IHeroEquip[]\n): (\"yuhun_ocr2.0\" | Ocr2Item)[] {\n  const items = equips.map(equip => {\n    const item = {\n      御魂ID: equip.id,\n      御魂等级: equip.level,\n      御魂星级: equip.quality,\n      御魂类型: SuitMap[String(equip.suit_id)],\n      位置: equip.pos + 1\n    };\n    const attrMap: { [key: string]: number } = {};\n    for (let attr of [\n      equip.base_attr,\n      ...equip.random_attrs,\n      ...equip.single_attrs\n    ]) {\n      const v = attrMap[attr.type] || 0;\n      attrMap[attr.type] = v + attr.value;\n    }\n    Object.keys(attrMap).forEach(k => {\n      (item as any)[(AttrNameMap as any)[k] as any] = attrMap[k];\n    });\n    return item;\n  });\n  return [\"yuhun_ocr2.0\", ...items];\n}\n\nexport function snapshotToOcr2(\n  shanpshot: ISnapshot\n): (\"yuhun_ocr2.0\" | Ocr2Item)[] {\n  return equipsToOcr2(shanpshot.data.hero_equips);\n}\n","import React, { SFC, useState, useEffect, EventHandler } from \"react\";\nimport \"./EquipList.scss\";\nimport { connect } from \"react-redux\";\nimport { IHeroEquip, HeroEquipAttrType, ISnapshot } from \"../../interfaces\";\nimport { IYyxState, IDispatch } from \"../../store\";\nimport {\n  EquipSelectors,\n  EquipActions,\n  IEquipListOptions,\n  EquipLevelFilter,\n  EquipEquippedFilter\n} from \"../../modules/equip\";\nimport { EquipGrid } from \"./EquipGrid\";\nimport {\n  Card,\n  Button,\n  Divider,\n  ButtonGroup,\n  InputGroup,\n  Callout\n} from \"@blueprintjs/core\";\nimport { EquipTypeMultiSelector } from \"./EquipTypeSelector\";\nimport { EquipPosition } from \"./EquipPosition\";\nimport {\n  HeroEquipPosAttrBaseTypes,\n  getEquipAttrName\n} from \"../../modules/equip/attr\";\nimport { useDebounce } from \"../../hooks/debounce\";\nimport classNames from \"classnames\";\nimport { DateInput } from \"@blueprintjs/datetime\";\nimport { formatDate, parseDate } from \"../../utils\";\nimport { SnapshotInfo } from \"../Snapshot/SnapshotInfo\";\nimport { exportJson } from \"../../modules/equip/export\";\nimport { equipsToOcr2 } from \"../../modules/equip/ocr2\";\n\nconst renderPositions = (\n  value: number[],\n  onClick: (value: number, active: boolean) => void\n) => {\n  const nodes = [];\n  for (let i = 1; i <= 6; i++) {\n    const active = value.includes(i);\n    nodes.push(\n      <EquipPosition\n        key={i}\n        active={active}\n        position={i}\n        onClick={() => onClick(i, active)}\n      />\n    );\n  }\n  return <ButtonGroup>{nodes}</ButtonGroup>;\n};\n\nconst renderStars = (\n  value: number[],\n  onClick: (value: number, active: boolean) => void\n) => {\n  const nodes = [];\n  for (let i = 1; i <= 6; i++) {\n    const active = value.includes(i);\n    nodes.push(\n      <Button key={i} active={active} onClick={() => onClick(i, active)}>\n        {i}星\n      </Button>\n    );\n  }\n  return <ButtonGroup>{nodes}</ButtonGroup>;\n};\n\nfunction getBaseAttrList(positions: number[]): HeroEquipAttrType[] {\n  return Array.from(\n    new Set(\n      positions\n        .map(pos => HeroEquipPosAttrBaseTypes.get(pos) || [])\n        .reduce((l, r) => [...l, ...r], [])\n    )\n  );\n}\n\nconst renderBaseAttrs = (\n  positions: number[],\n  value: HeroEquipAttrType[] | null,\n  onChange: (value: HeroEquipAttrType, active: boolean) => void\n) => {\n  if (!positions.length) {\n    return (\n      <Button minimal disabled alignText=\"left\">\n        请选择位置\n      </Button>\n    );\n  }\n\n  const attrs = getBaseAttrList(positions);\n  return (\n    <ButtonGroup>\n      {attrs.map(type => {\n        const active = !!(value && value.includes(type));\n        return (\n          <Button\n            active={active}\n            key={type}\n            onClick={() => onChange(type, active)}\n            disabled={attrs.length === 1}\n          >\n            {getEquipAttrName(type)}\n          </Button>\n        );\n      })}\n    </ButtonGroup>\n  );\n};\n\nconst renderScores = (\n  value: number[],\n  onClick: (value: number, active: boolean) => void\n) => {\n  const nodes = [];\n  for (let i = 3; i <= 9; i++) {\n    const active = value.includes(i);\n    nodes.push(\n      <Button key={i} active={active} onClick={() => onClick(i, active)}>\n        {i}分\n      </Button>\n    );\n  }\n  return <ButtonGroup>{nodes}</ButtonGroup>;\n};\n\nconst DefaultListOptions: IEquipListOptions = {\n  id: \"\",\n  types: null,\n  positions: [],\n  stars: [6],\n  baseAttrs: null,\n  trashed: false,\n  level: EquipLevelFilter.Max,\n  equipped: EquipEquippedFilter.Any,\n  creationTimeFrom: null,\n  creationTimeTo: null,\n  scores: []\n};\n\nconst Render: SFC<{\n  equips: IHeroEquip[] | null;\n  dispatch: IDispatch;\n}> = props => {\n  const [options, _setOptions] = useState<IEquipListOptions>(\n    DefaultListOptions\n  );\n  const debouncedOptions = useDebounce(options, 500);\n  const [loading, setLoading] = useState(false);\n  const [exporting, setExporting] = useState(false);\n  const [exported, setExported] = useState(\"\");\n\n  useEffect(() => {\n    if (debouncedOptions) {\n      props.dispatch(EquipActions.setListOptions(debouncedOptions));\n      setLoading(false);\n    }\n  }, [debouncedOptions]);\n\n  const setOptions = (v: IEquipListOptions) => {\n    _setOptions(v);\n    setLoading(true);\n  };\n\n  if (!props.equips) {\n    return null;\n  }\n\n  return (\n    <div className=\"yyx-full-height yyx-layout row\">\n      <Card className=\"yyx-nav-left item yyx-options equip-list-options\">\n        <div className=\"item\">\n          <InputGroup\n            leftIcon=\"filter\"\n            placeholder=\"搜索御魂ID\"\n            value={options.id}\n            onChange={(e: any) =>\n              setOptions({\n                ...options,\n                id: e.target.value\n              })\n            }\n          />\n        </div>\n        <Divider className=\"item\" />\n        <div className=\"yyx-layout row item\">\n          <label className=\"item\">类型: </label>\n          <EquipTypeMultiSelector\n            className=\"item\"\n            onChange={types =>\n              setOptions({\n                ...options,\n                types\n              })\n            }\n          />\n        </div>\n        <div className=\"item yyx-layout row\">\n          <label className=\"item\">位置: </label>\n          <div className=\"item pos-icons\">\n            {renderPositions(options.positions, (pos, active) => {\n              let positions;\n              if (active) {\n                positions = options.positions.filter(p => p !== pos);\n              } else {\n                positions = [...options.positions.filter(p => p !== pos), pos];\n              }\n              setOptions({\n                ...options,\n                positions\n              });\n            })}\n          </div>\n        </div>\n        <div className=\"item yyx-layout row\">\n          <label className=\"item\">星级: </label>\n          <div className=\"item\">\n            {renderStars(options.stars, (star, active) => {\n              let stars;\n              if (active) {\n                stars = options.stars.filter(s => s !== star);\n              } else {\n                stars = [...options.stars.filter(s => s !== star), star];\n              }\n              setOptions({\n                ...options,\n                stars\n              });\n            })}\n          </div>\n        </div>\n        <div className=\"item yyx-layout row \">\n          <label className=\"item\">主属性:</label>\n          <div className=\"item\">\n            {renderBaseAttrs(\n              options.positions,\n              options.baseAttrs,\n              (attr, active) => {\n                let attrs;\n                if (active) {\n                  attrs = options.baseAttrs\n                    ? options.baseAttrs.filter(a => a !== attr)\n                    : [];\n                } else {\n                  attrs = options.baseAttrs\n                    ? [...options.baseAttrs.filter(a => a !== attr), attr]\n                    : [attr];\n                }\n                setOptions({\n                  ...options,\n                  baseAttrs: attrs\n                });\n              }\n            )}\n          </div>\n        </div>\n        <div className=\"item yyx-layout row\">\n          <label className=\"item\">强化:</label>\n          <div className=\"item\">\n            <ButtonGroup>\n              <Button\n                active={options.level === EquipLevelFilter.Zero}\n                onClick={() => {\n                  setOptions({\n                    ...options,\n                    level:\n                      options.level === EquipLevelFilter.Zero\n                        ? EquipLevelFilter.Any\n                        : EquipLevelFilter.Zero\n                  });\n                }}\n              >\n                未强化\n              </Button>\n              <Button\n                active={options.level === EquipLevelFilter.Max}\n                onClick={() => {\n                  setOptions({\n                    ...options,\n                    level:\n                      options.level === EquipLevelFilter.Max\n                        ? EquipLevelFilter.Any\n                        : EquipLevelFilter.Max\n                  });\n                }}\n              >\n                +15\n              </Button>\n            </ButtonGroup>\n          </div>\n        </div>\n        <div className=\"item yyx-layout row\">\n          <label className=\"item\">装备:</label>\n          <div className=\"item\">\n            <ButtonGroup>\n              <Button\n                active={options.equipped === EquipEquippedFilter.NotEquipped}\n                onClick={() => {\n                  setOptions({\n                    ...options,\n                    equipped:\n                      options.equipped === EquipEquippedFilter.NotEquipped\n                        ? EquipEquippedFilter.Any\n                        : EquipEquippedFilter.NotEquipped\n                  });\n                }}\n              >\n                未装备\n              </Button>\n              <Button\n                active={options.equipped === EquipEquippedFilter.Equipped}\n                onClick={() => {\n                  setOptions({\n                    ...options,\n                    equipped:\n                      options.equipped === EquipEquippedFilter.Equipped\n                        ? EquipEquippedFilter.Any\n                        : EquipEquippedFilter.Equipped\n                  });\n                }}\n              >\n                装备\n              </Button>\n            </ButtonGroup>\n          </div>\n        </div>\n        <div className=\"item yyx-layout row\">\n          <label className=\"item\">弃置:</label>\n          <div className=\"item\">\n            <ButtonGroup>\n              <Button\n                active={options.trashed === false}\n                onClick={() => {\n                  setOptions({\n                    ...options,\n                    trashed: options.trashed === false ? null : false\n                  });\n                }}\n              >\n                未弃置\n              </Button>\n              <Button\n                active={options.trashed === true}\n                onClick={() => {\n                  setOptions({\n                    ...options,\n                    trashed: options.trashed === true ? null : true\n                  });\n                }}\n              >\n                已弃置\n              </Button>\n            </ButtonGroup>\n          </div>\n        </div>\n        {/* <div className=\"item yyx-layout row \">\n          <label className=\"item\">评分: </label>\n          <div className=\"item\">\n            {renderScores(options.scores, (score, active) => {\n              let scores;\n              if (active) {\n                scores = options.scores\n                  ? options.scores.filter(s => s !== score)\n                  : [];\n              } else {\n                scores = options.scores\n                  ? [...options.scores.filter(s => s !== score), score]\n                  : [score];\n              }\n              setOptions({\n                ...options,\n                scores\n              });\n            })}\n          </div>\n        </div> */}\n        <div className=\"item yyx-layout row\">\n          <label className=\"item\">获取时间:</label>\n          <div className=\"item\">\n            <DateInput\n              showActionsBar\n              placeholder=\"起始时间\"\n              timePrecision=\"minute\"\n              formatDate={formatDate}\n              parseDate={parseDate}\n              onChange={date =>\n                setOptions({\n                  ...options,\n                  creationTimeFrom: date\n                })\n              }\n              value={options.creationTimeFrom || undefined}\n            />\n            <br />\n            <DateInput\n              showActionsBar\n              formatDate={formatDate}\n              parseDate={parseDate}\n              placeholder=\"结束时间\"\n              timePrecision=\"minute\"\n              onChange={date =>\n                setOptions({\n                  ...options,\n                  creationTimeTo: date\n                })\n              }\n              value={options.creationTimeTo || undefined}\n            />\n          </div>\n          <div />\n        </div>\n        <Divider className=\"item\" />\n        <div className=\"item\">数量: {props.equips.length}</div>\n        <div className=\"item\">\n          <SnapshotInfo\n            render={info => (\n              <Button\n                intent={\"primary\"}\n                disabled={exporting}\n                onClick={async () => {\n                  if (info) {\n                    setExporting(true);\n                    const path = await exportOcr2Json(\n                      info,\n                      props.equips as IHeroEquip[]\n                    );\n                    setExported(path);\n                    setExporting(false);\n                  }\n                }}\n              >\n                导出JSON (御魂导出器)\n              </Button>\n            )}\n          />\n          <br />\n          <br />\n          {exported && (\n            <Callout intent={\"success\"}>\n              导出成功: <br />\n              <a href={`/export-files/${exported}`} target=\"_blank\">\n                {exported}\n              </a>\n            </Callout>\n          )}\n        </div>\n      </Card>\n      <Divider />\n      <div\n        className={classNames(\n          \"yyx-content yyx-content-scroll\",\n          \"item\",\n          loading && \"equip-list-loading\"\n        )}\n      >\n        <EquipGrid\n          items={props.equips}\n          onClickEquip={equip => {\n            console.log(equip);\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nasync function exportOcr2Json(\n  snapshotInfo: ISnapshot,\n  equips: IHeroEquip[]\n): Promise<string> {\n  const filename = `${snapshotInfo.data.player.name}_${\n    snapshotInfo.data.player.id\n  }_${formatDate(new Date(), \"YYYYMMDD_HHmm\")}.json`;\n  return exportJson(filename, equipsToOcr2(equips));\n}\n\nexport const EquipList = connect((state: IYyxState) => ({\n  equips: EquipSelectors.selectDisplay(state)\n}))(Render);\n","import React, { SFC, useState, useEffect } from \"react\";\nimport \"./EquipSetAttrs.scss\";\nimport { IEquipSetInfo } from \"../../modules/equip\";\n\nimport {\n  getEquipAttrName,\n  formatEquipAttrValue\n} from \"../../modules/equip/attr\";\nimport { formatAttrValue } from \"../../utils\";\nimport { HeroEquipAttrType } from \"../../interfaces\";\nimport classNames from \"classnames\";\nimport { EquipTypeIcon } from \"./EquipIcon\";\n\nconst AttrTable = [\n  [HeroEquipAttrType.Attack, HeroEquipAttrType.CritRate],\n  [HeroEquipAttrType.AttackRate, HeroEquipAttrType.CritPower],\n  [HeroEquipAttrType.Hp, HeroEquipAttrType.EffectHitRate],\n  [HeroEquipAttrType.HpRate, HeroEquipAttrType.EffectResistRate],\n  [HeroEquipAttrType.Defense, HeroEquipAttrType.Speed],\n  [HeroEquipAttrType.DefenseRate, null]\n];\n\nexport const EquipSetAttrs: SFC<{\n  className?: string;\n  info: IEquipSetInfo;\n}> = ({ className, info }) => {\n  return (\n    <div className={classNames(\"equip-set-attrs\", className)}>\n      <ul className=\"attr-list\">\n        {AttrTable.map(([l, r], idx) => {\n          return (\n            <li key={idx} className=\"yyx-layout row\">\n              {l && (\n                <div className=\"item yyx-layout row\">\n                  <label className=\"item\">{getEquipAttrName(l)}</label>\n                  <span className=\"item value\">\n                    {formatEquipAttrValue(l, info.attrMap.get(l) || 0, true)}\n                  </span>\n                </div>\n              )}\n              {r && (\n                <div className=\"item yyx-layout row\">\n                  <label className=\"item\">{getEquipAttrName(r)}</label>\n                  <span className=\"item value\">\n                    {formatEquipAttrValue(r, info.attrMap.get(r) || 0, true)}\n                  </span>\n                </div>\n              )}\n            </li>\n          );\n        })}\n      </ul>\n      <ul className=\"suit-effect-list\">\n        {info.suits.map(data => {\n          return (\n            <li key={data.id} className=\"yyx-layout row\">\n              <div className=\"item icon\">\n                <EquipTypeIcon id={data.id} size={24} />\n              </div>\n              <div className=\"item effect-desc\">\n                {data.effect[3][0] || data.effect[1][0]}\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n","import React, { SFC } from \"react\";\nimport \"./EquipPage.scss\";\nimport { SubNavLink, SubNav } from \"../Common/SubNav\";\nimport { EquipList } from \"./EquipList\";\nimport { Route } from \"react-router\";\nimport { EquipPresets } from \"./EquipPresets\";\n\nconst SubPages: (SubNavLink & { component: any })[] = [\n  {\n    label: \"御魂列表\",\n    to: \"/equip\",\n    component: EquipList\n  },\n  {\n    label: \"御魂方案\",\n    to: \"/equip/preset\",\n    component: EquipPresets\n  }\n];\n\nexport const EquipPage: SFC = props => {\n  return (\n    <div className=\"yyx-full-height yyx-layout row\">\n      <div className=\"item yyx-nav-left\">\n        <SubNav links={SubPages} />\n      </div>\n      <div className=\"item yyx-content yyx-content-scroll\">\n        {SubPages.map(page => (\n          <Route\n            key={page.to}\n            path={page.to}\n            exact={page.to === \"/equip\"}\n            component={page.component}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React, { SFC, useState, useEffect } from \"react\";\nimport \"./EquipPresets.scss\";\nimport { connect } from \"react-redux\";\nimport {\n  IHeroEquip,\n  IHeroEquipPreset,\n  HeroEquipAttrType\n} from \"../../interfaces\";\nimport { IYyxState } from \"../../store\";\nimport { EquipSelectors, IEquipPresetItem } from \"../../modules/equip\";\nimport { Card, InputGroup, Divider } from \"@blueprintjs/core\";\nimport { Equips } from \"./Equips\";\nimport { EquipSet } from \"./EquipSet\";\nimport { useDebounce } from \"../../hooks/debounce\";\nimport { EquipSetAttrs } from \"./EquipSetAttrs\";\nimport { EquipTypeMultiSelector } from \"./EquipTypeSelector\";\n\nconst Render: SFC<{\n  presets: IEquipPresetItem[] | null;\n}> = props => {\n  const [term, setTerm] = useState(\"\");\n  const [suites, setSuites] = useState<number[]>([]);\n  const termDebounced = useDebounce(term.trim(), 300);\n  const [list, setList] = useState(props.presets);\n\n  useEffect(() => {\n    if (!props.presets) {\n      return;\n    }\n    let filteredList = props.presets;\n\n    if (suites.length) {\n      filteredList = filteredList.filter(p =>\n        suites.length < p.suits.length\n          ? p.suits.some(data => suites.includes(data.id))\n          : p.suits.length == suites.length &&\n            p.suits.every(data => suites.includes(data.id))\n      );\n    }\n\n    if (termDebounced) {\n      filteredList = filteredList.filter(p => p.name.includes(termDebounced));\n    }\n\n    setList(filteredList);\n  }, [props.presets, termDebounced, suites]);\n\n  const { presets } = props;\n\n  if (!presets || !list) {\n    return null;\n  }\n\n  return (\n    <div className=\"yyx-padding\">\n      <Card className=\"yyx-layout row wrap yyx-options yyx-space-v\">\n        <div className=\"item\">\n          <InputGroup\n            leftIcon=\"filter\"\n            placeholder=\"搜索名称...\"\n            value={term}\n            onChange={(e: any) => setTerm(e.target.value)}\n          />\n        </div>\n        <div className=\"yyx-layout row item\">\n          <label className=\"item\">套装: </label>\n          <EquipTypeMultiSelector\n            className=\"item\"\n            onChange={types => setSuites(types)}\n          />\n        </div>\n        <div className=\"item\">数量: {list.length}</div>\n      </Card>\n      <ul className=\"bp3-list-unstyled equip-preset-list\">\n        {list.map((i, idx) => (\n          <li key={idx}>\n            <div className=\"yyx-layout row title\">\n              <div className=\"item name\">{i.name}</div>\n              <div className=\"item right\" />\n            </div>\n            <EquipSet equips={i.equips} />\n            <EquipSetAttrs info={i} />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport const EquipPresets = connect((state: IYyxState) => ({\n  presets: EquipSelectors.selectPresetItems(state)\n}))(Render);\n","import { IRealmCardData } from \"../../interfaces\";\n\nconst DATA = require(\"./REALM_CARD_DATA.json\");\n\nexport const RealmCardNames = [\n  \"太鼓\",\n  \"斗鱼\",\n  \"伞室内\",\n  \"太阴符咒\",\n  \"太阳符咒\",\n  \"伞结界\",\n  \"夜屏风\",\n  \"白桃林\",\n  \"胧车\",\n  \"鬼火烧\",\n  \"葫芦酒\",\n  \"口水蛙\",\n  \"孟婆汤\",\n  \"绵绵冰\",\n  \"千年笛\",\n  \"神乐铃\",\n  \"天雷鼓\",\n  \"阎琵琶\",\n  \"炼妖琴\"\n];\n\nconst DataMap: Map<number, IRealmCardData> = DATA.reduce(\n  (m: Map<number, IRealmCardData>, i: any) => {\n    m.set(i.id, i);\n    return m;\n  },\n  new Map()\n);\n\nexport const getRealmCardData = (itemId: number) => DataMap.get(itemId);\n","import { IAction, IDispatch, IYyxState } from \"../../store\";\nimport { createSelector } from \"reselect\";\nimport { IRealmCard, IRealmCardData } from \"../../interfaces\";\nimport { getRealmCardData, RealmCardNames } from \"./data\";\nimport { SnapshotSelectors } from \"../snapshot\";\nimport { sortDesc } from \"../../utils\";\n\nconst selectAll = createSelector(\n  SnapshotSelectors.selectCurrentSnapshot,\n  snapshot => {\n    if (!snapshot) {\n      return null;\n    }\n    return snapshot.data.realm_cards.map(c => {\n      c.data = getRealmCardData(c.item_id);\n      return c;\n    });\n  }\n);\n\nexport type IRealmCardGroupMapByName = Map<\n  string, // name\n  Array<{\n    item_id: number;\n    star: number;\n    count: number;\n  }>\n>;\n\nconst selectGroupMapByName = createSelector(\n  selectAll,\n  cards => {\n    if (!cards) {\n      return null;\n    }\n    const map: IRealmCardGroupMapByName = new Map();\n\n    cards\n      .slice()\n      .sort(\n        sortDesc((a, b) => {\n          return (a.data ? a.data.star : 0) - (b.data ? b.data.star : 0);\n        })\n      )\n      .forEach(c => {\n        const name = c.data && c.data.name;\n        const star = c.data && c.data.star;\n\n        if (name && star) {\n          let list = map.get(name);\n          if (!list) {\n            map.set(name, [\n              {\n                item_id: c.item_id,\n                star,\n                count: 1\n              }\n            ]);\n          } else {\n            const entry = list.find(i => i.item_id === c.item_id);\n            if (entry) {\n              entry.count++;\n            } else {\n              list.push({\n                item_id: c.item_id,\n                star,\n                count: 1\n              });\n            }\n          }\n        }\n      });\n\n    return map;\n  }\n);\n\nexport interface IRealmCardGroup {\n  name: string;\n  items: Array<{\n    item_id: number;\n    star: number;\n    count: number;\n  }>;\n}\n\nconst selectGroups = createSelector(\n  selectGroupMapByName,\n  map => {\n    if (!map) {\n      return null;\n    }\n\n    return RealmCardNames.map(name => [name, map.get(name)])\n      .filter(v => !!v[1])\n      .map(([name, items]) => {\n        return {\n          name,\n          items\n        };\n      }) as IRealmCardGroup[];\n  }\n);\n\nexport const RealmCardSelectors = {\n  selectGroups\n};\n","import React, { SFC, useState } from \"react\";\nimport \"./RealmCardPage.scss\";\nimport { connect } from \"react-redux\";\nimport { IYyxState } from \"../../store\";\nimport { RealmCardSelectors, IRealmCardGroup } from \"../../modules/realm_card\";\n\nconst Render: SFC<{\n  groups: IRealmCardGroup[] | null;\n}> = props => {\n  if (!props.groups) {\n    return null;\n  }\n\n  const columns = [];\n  const rows = [];\n  for (let i = 0; i < 6; i++) {\n    columns.push(<th key={i}>{6 - i}星</th>);\n  }\n\n  for (let g of props.groups) {\n    rows.push(\n      <tr key={g.name}>\n        <td>\n          <strong>{g.name}</strong>\n        </td>\n        {columns.map((c, idx) => {\n          const gi = g.items.find(i => i.star === 6 - idx);\n          return <td key={idx}>{gi ? gi.count : 0}</td>;\n        })}\n      </tr>\n    );\n  }\n\n  return (\n    <>\n      <table className=\"bp3-html-table bp3-html-table-striped\">\n        <thead>\n          <tr>\n            <th>结界卡</th>\n            {columns}\n          </tr>\n        </thead>\n        <tbody>{rows}</tbody>\n      </table>\n    </>\n  );\n};\n\nexport const RealmCardPage = connect((state: IYyxState) => ({\n  groups: RealmCardSelectors.selectGroups(state)\n}))(Render);\n","import React, { ReactElement, SFC, useState, useEffect, lazy } from \"react\";\nimport pkg from \"../../../package.json\";\nimport { HttpClient } from \"../../modules/http\";\nimport {\n  Popover,\n  Icon,\n  Spinner,\n  Intent,\n  Button,\n  Tag,\n  Divider\n} from \"@blueprintjs/core\";\nimport \"./UpdateInfo.scss\";\nconst os: string = require(\"platform\").os.family;\nconst Markdown = require(\"react-markdown\");\n\nconst MyTargets: string[] =\n  os === \"OS X\"\n    ? [\"macOS\"]\n    : os.includes(\"Windows\")\n    ? [\n        \"Windows\",\n        \"Windows-32bit\",\n        \"Windows-64bit\",\n        \"Steam\",\n        \"Facebook-Gameroom\"\n      ]\n    : [\"Ubuntu\", \"Debian\", \"Fedora\", \"Red Hat\"].some(v => os.includes(v))\n    ? [\"Linux\"]\n    : [];\n\nconst R_FILENAME = /^(yyx|yyx-snapshot)-(\\d+\\.\\d+.\\d+)-([^.]+)\\.(.+)$/;\n\nfunction getProxyUrl(url: string): string {\n  return url.replace(\n    \"https://github.com/OnmyojiX/yyx/\",\n    \"http://yyx.cloud/github/\"\n  );\n}\n\nfunction getAssetElement(asset: GithubAsset) {\n  const parts = asset.name.match(R_FILENAME);\n  if (!parts) {\n    return null;\n  }\n  const [_, product, version, target] = parts;\n  const myTarget = MyTargets.includes(target);\n  const productName = product === \"yyx\" ? \"痒痒熊主程序\" : \"痒痒熊快照\";\n  return (\n    <>\n      <a href={asset.browser_download_url} target=\"_blank\">\n        <Icon icon=\"download\" />\n        &nbsp;\n        {myTarget ? <strong>{productName}</strong> : productName}\n      </a>\n      &nbsp;\n      <Tag intent={Intent.PRIMARY} minimal={!myTarget}>\n        {target.replace(\"-\", \" \")}\n      </Tag>\n      &nbsp;v{version}\n    </>\n  );\n}\n\ninterface GithubAsset {\n  browser_download_url: string;\n  content_type: string;\n  name: string;\n  size: number;\n}\n\ninterface GithubRelease {\n  tag_name: string;\n  name: string;\n  published_at: string;\n  body: string;\n  assets: Array<GithubAsset>;\n  prerelease: boolean;\n  draft: boolean;\n}\n\nconst ReleaseInfo: SFC<{ release: GithubRelease }> = ({ release }) => {\n  return (\n    <div className=\"release-info\">\n      <h2>{release.name}</h2>\n      <p>\n        <small>v{release.tag_name}</small>\n      </p>\n      <Markdown source={release.body} />\n      <Divider />\n      <ul className=\"asset-list\">\n        {release.assets.map(a => (\n          <li key={a.browser_download_url}>{getAssetElement(a)}</li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport const UpdateInfo: SFC = props => {\n  const [loading, setLoading] = useState<boolean>(true);\n  const [latest, setLatest] = useState<GithubRelease | null>(null);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    Promise.race([\n      HttpClient.get<GithubRelease>(\n        \"http://yyx.cloud/github-api/releases/latest\"\n      ).then(res => {\n        res.data.assets.forEach(\n          a => (a.browser_download_url = getProxyUrl(a.browser_download_url))\n        );\n        return res;\n      }),\n      HttpClient.get<GithubRelease>(\n        \"https://api.github.com/repos/OnmyojiX/yyx/releases/latest\"\n      )\n    ]).then(\n      res => {\n        if (res.data) {\n          if (\n            res.data.tag_name > pkg.version &&\n            !res.data.draft &&\n            !res.data.prerelease\n          ) {\n            setLatest(res.data);\n          }\n        }\n        setLoading(false);\n      },\n      err => {\n        setError(err);\n        setLoading(false);\n      }\n    );\n  }, []);\n\n  if (loading) {\n    return <Spinner size={16} />;\n  }\n\n  if (error) {\n    return (\n      <a href=\"http://nga.178.com/read.php?tid=16557282\" target=\"_blank\">\n        检查更新\n      </a>\n    );\n  }\n\n  return (\n    <span className=\"bp3-text-muted\">\n      {!latest && pkg.version}\n      {latest && (\n        <Popover defaultIsOpen={true}>\n          <Button minimal intent={Intent.PRIMARY}>\n            <Icon icon=\"info-sign\" />\n            &nbsp; <strong>有更新</strong>\n          </Button>\n          <ReleaseInfo release={latest} />\n        </Popover>\n      )}\n    </span>\n  );\n};\n","import \"./About.scss\";\nimport React, { ReactElement, SFC, useState, useEffect } from \"react\";\nimport logo from \"../../assets/logo.svg\";\nimport { Icon } from \"@blueprintjs/core\";\nimport pkg from \"../../../package.json\";\n\nexport const About: SFC = props => {\n  return (\n    <div className=\"about\">\n      <div className=\"yyx-layout row\">\n        <div className=\"item logo\">\n          <img width={100} height={100} src={logo} />\n          <br />\n          <small className=\"bp3-text-muted\">v{pkg.version}</small>\n        </div>\n        <div className=\"item content\">\n          <dl>\n            <dt>作者</dt>\n            <dd>海外加速区 | AD钙奶猫</dd>\n            <dt>NGA</dt>\n            <dd>\n              <a\n                target=\"_blank\"\n                href=\"http://nga.178.com/read.php?tid=16557282\"\n              >\n                链接 <Icon icon={\"link\"} />\n              </a>\n            </dd>\n            <dt>GitHub</dt>\n            <dd>\n              <a target=\"_blank\" href=\"https://github.com/OnmyojiX/yyx\">\n                链接 <Icon icon={\"link\"} />\n              </a>\n            </dd>\n            {/* <dt>QQ群</dt>\n            <dd>496107455</dd>\n            <dt>微博</dt>\n            <dd>\n              <a\n                target=\"_blank\"\n                href=\"https://www.weibo.com/p/1005056044720097/home\"\n              >\n                链接 <Icon icon={\"link\"} />\n              </a>\n            </dd> */}\n          </dl>\n\n          <h2 className=\"important\">求赞</h2>\n          <div className=\"important\">\n            请给我老婆 <strong>AD钙奶熊</strong> 点赞\n          </div>\n          <div className=\"important\">\n            请给我老婆 <strong>AD钙奶熊</strong> 点赞\n          </div>\n          <div className=\"important\">\n            请给我老婆 <strong>AD钙奶熊</strong> 点赞\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { SFC, ComponentClass } from \"react\";\nimport \"./Main.scss\";\nimport logo from \"../../assets/logo.svg\";\n\nimport {\n  Alignment,\n  Button,\n  Classes,\n  Navbar,\n  NavbarDivider,\n  NavbarGroup,\n  ButtonGroup,\n  Popover\n} from \"@blueprintjs/core\";\n\nimport {\n  BrowserRouter as Router,\n  Route,\n  Link,\n  RouteComponentProps,\n  withRouter\n} from \"react-router-dom\";\nimport { YyxStore } from \"../../store\";\nimport { SnapshotActions, SnapshotSelectors } from \"../../modules/snapshot\";\nimport { OverviewPage } from \"../Overview/OverviewPage\";\nimport { SnapshotInfo } from \"../Snapshot/SnapshotInfo\";\nimport { ISnapshot } from \"../../interfaces\";\n\nimport { HeroPage } from \"../Hero/HeroPage\";\nimport { EquipPage } from \"../Equip/EquipPage\";\nimport { RealmCardPage } from \"../RealmCard/RealmCardPage\";\nimport { UpdateInfo } from \"../Update/UpdateInfo\";\nimport { About } from \"../About/About\";\nimport { useSelector } from \"react-redux\";\n\nconst routes = [\n  {\n    path: \"/\",\n    component: OverviewPage,\n    renderLabel: () => \"概况\",\n    show: (_: ISnapshot) => true\n  },\n  {\n    path: \"/hero\",\n    component: HeroPage,\n    renderLabel: (snapshot: ISnapshot) =>\n      `式神 (${snapshot.data.heroes.length})`,\n    show: (s: ISnapshot) => !s.cbg_url\n  },\n  {\n    path: \"/equip\",\n    component: EquipPage,\n    renderLabel: (snapshot: ISnapshot) =>\n      `御魂 (${snapshot.data.hero_equips.length})`,\n    show: (s: ISnapshot) => true\n  },\n  {\n    path: \"/realm-card\",\n    component: RealmCardPage,\n    renderLabel: (snapshot: ISnapshot) =>\n      `结界卡 (${snapshot.data.realm_cards.length})`,\n    show: (s: ISnapshot) => !s.cbg_url\n  }\n];\n\nconst Render: SFC<RouteComponentProps> = props => {\n  const current = useSelector(SnapshotSelectors.selectCurrentSnapshot);\n  const exportUrl = React.useMemo(() => {\n    if (!current) {\n      return null;\n    }\n    const ts = Math.floor(new Date(current.timestamp).getTime() / 1000);\n    if (current.cbg_url) {\n      const name = `yyx_snapshot_cbg_${current.data.player.name}.json`;\n      return `/api/snapshot-export/${encodeURIComponent(name)}`;\n    } else {\n      return `/api/snapshot-export/yyx_snapshot_${ts}_${current.data.player.server_id}_${current.data.player.id}.json`;\n    }\n  }, [current]);\n\n  const path = props.location.pathname;\n  return (\n    <main>\n      <Navbar>\n        <NavbarGroup align={Alignment.LEFT}>\n          <a className=\"navbar-left\">\n            <img className=\"logo\" src={logo} />\n          </a>\n          <NavbarDivider />\n          <SnapshotInfo\n            render={info =>\n              info && (\n                <>\n                  <span>\n                    {info.data.player.name}\n                    {info.cbg_url && (\n                      <>\n                        &nbsp;\n                        <a href={info.cbg_url} target=\"_blank\">\n                          [藏宝阁]\n                        </a>\n                      </>\n                    )}\n                  </span>\n                  <NavbarDivider />\n                  <ButtonGroup large>\n                    {routes.map((r, i) =>\n                      r.show(info) ? (\n                        <Button\n                          key={i}\n                          onClick={() => props.history.push(r.path)}\n                          active={\n                            r.path === \"/\"\n                              ? path === \"/\"\n                              : path.startsWith(r.path)\n                          }\n                          text={r.renderLabel(info)}\n                        />\n                      ) : null\n                    )}\n                  </ButtonGroup>\n                </>\n              )\n            }\n          />\n        </NavbarGroup>\n        <NavbarGroup align={Alignment.RIGHT}>\n          <UpdateInfo />\n          <NavbarDivider />\n          <Popover>\n            <Button minimal>关于</Button>\n            <About />\n          </Popover>\n          <NavbarDivider />\n          {exportUrl && (\n            <>\n              <a href={exportUrl} target=\"_blank\">\n                导出当前快照\n              </a>\n              <NavbarDivider />\n            </>\n          )}\n          <Button\n            icon=\"folder-open\"\n            onClick={() => {\n              YyxStore.dispatch(SnapshotActions.resetCurrent());\n            }}\n          >\n            打开其他快照\n          </Button>\n        </NavbarGroup>\n      </Navbar>\n      <div className=\"yyx-container\">\n        {routes.map((route, i) => (\n          <Route\n            key={i}\n            path={route.path}\n            exact={route.path === \"/\"}\n            component={route.component}\n          />\n        ))}\n      </div>\n    </main>\n  );\n};\n\nconst LayoutImpl = withRouter(Render);\n\nexport const Main: SFC = props => {\n  return (\n    <Router>\n      <LayoutImpl {...props} />\n    </Router>\n  );\n};\n","import { HttpClient } from \"../http\";\n\nexport const pullCbg = (url: string) => {\n  return HttpClient.put(\"/api/snapshot-cbg\", {\n    url\n  }).then(res => res.data);\n};\n","import React from \"react\";\nimport {\n  Dialog,\n  Classes,\n  Colors,\n  TextArea,\n  Intent,\n  Button,\n  Spinner,\n  Callout,\n  Card\n} from \"@blueprintjs/core\";\nimport classNames from \"classnames\";\nimport { ICbgSnapshot } from \"../../interfaces\";\nimport { pullCbg } from \"../../modules/cbg\";\nimport { formatCurrency } from \"../../utils\";\nimport { SnapshotActions } from \"../../modules/snapshot\";\nimport { useDispatch } from \"react-redux\";\n\nexport interface Props {\n  open: boolean;\n  onClose: () => void;\n}\n\nconst SnapshopPreview: React.SFC<{\n  snapshot: ICbgSnapshot;\n}> = ({ snapshot }) => {\n  return (\n    <Card>\n      <h4 className={Classes.HEADING}>\n        卖家: {snapshot.listing_info.player_name}\n      </h4>\n      <p>\n        {snapshot.listing_info.server_name}\n        <br />\n        <strong className={Classes.TEXT_MUTED}>\n          {snapshot.listing_info.player_level}级\n        </strong>\n        <br />\n        <strong style={{ color: Colors.RED1 }}>\n          {formatCurrency(snapshot.listing_info.price)}\n        </strong>\n      </p>\n    </Card>\n  );\n};\n\nconst OpenCbgUrl: React.SFC<Props> = props => {\n  const { open, onClose } = props;\n  const dispatch = useDispatch();\n  const [url, setUrl] = React.useState(\"\");\n  const [snapshot, setSnapshot] = React.useState<ICbgSnapshot | null>(null);\n  const [loading, setLoading] = React.useState(false);\n  const [error, setError] = React.useState<Error | null>(null);\n\n  const onPull = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const snapshot = await pullCbg(url);\n      setSnapshot(snapshot);\n    } catch (e) {\n      setError(e);\n    }\n    setLoading(false);\n  };\n\n  const onOpen = async (snapshot: ICbgSnapshot) => {\n    setLoading(true);\n    setError(null);\n    try {\n      await dispatch(SnapshotActions.select(snapshot.snapshot));\n    } catch (e) {\n      setError(e);\n    }\n    setSnapshot(null);\n    setLoading(false);\n    onClose();\n  };\n\n  const load = (\n    <>\n      <div className={Classes.DIALOG_BODY}>\n        {error && (\n          <div className=\"yyx-space-v\">\n            <Callout title=\"读取藏宝阁数据失败\" intent=\"danger\">\n              {error.message}\n            </Callout>\n          </div>\n        )}\n\n        <p className={classNames(Classes.TEXT_SMALL, Classes.TEXT_MUTED)}>\n          打开任意藏宝阁商品详情页面，复制粘贴如下格式的整个网址:\n          https://yys.cbg.163.com/cgi/mweb/equip/10/201907131401616...\n        </p>\n        <TextArea\n          className={classNames(Classes.FILL)}\n          growVertically={true}\n          large={true}\n          intent={Intent.PRIMARY}\n          placeholder=\"粘贴藏宝阁商品链接\"\n          value={url}\n          onChange={v => setUrl(v.target.value.trim())}\n          disabled={loading}\n        />\n      </div>\n      <div className={Classes.DIALOG_FOOTER}>\n        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n          {loading ? (\n            <Spinner size={24} />\n          ) : (\n            <Button intent=\"primary\" onClick={onPull} disabled={!url}>\n              读取藏宝阁数据\n            </Button>\n          )}\n        </div>\n      </div>\n    </>\n  );\n\n  const preview = snapshot && (\n    <>\n      <div className={Classes.DIALOG_BODY}>\n        <SnapshopPreview snapshot={snapshot} />\n      </div>\n      <div className={Classes.DIALOG_FOOTER}>\n        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n          {loading ? (\n            <Spinner size={24} />\n          ) : (\n            <>\n              <Button\n                intent=\"primary\"\n                onClick={() => onOpen(snapshot)}\n                disabled={!url}\n              >\n                打开\n              </Button>\n              <Button onClick={() => setSnapshot(null)}>重新输入链接</Button>\n            </>\n          )}\n        </div>\n      </div>\n    </>\n  );\n\n  return (\n    <Dialog isOpen={open} onClose={onClose} title=\"打开藏宝阁链接\">\n      {snapshot ? preview : load}\n    </Dialog>\n  );\n};\n\nexport { OpenCbgUrl };\n","import React, { SFC, ChangeEvent, FormEventHandler, useState } from \"react\";\nimport \"./SnapshotSelectScreen.scss\";\nimport logo from \"../../assets/logo.svg\";\nimport {\n  FileInput,\n  Callout,\n  Spinner,\n  Button,\n  Divider\n} from \"@blueprintjs/core\";\nimport { YyxStore, IDispatch } from \"../../store\";\nimport { SnapshotActions } from \"../../modules/snapshot\";\nimport { connect } from \"react-redux\";\nimport { OpenCbgUrl } from \"./OpenCbgUrl\";\n\nconst SnapshotSelectScreenImpl: SFC<{\n  dispatch: IDispatch;\n}> = props => {\n  const [error, setError] = useState<Error | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [openCbg, setOpenCbg] = useState(false);\n\n  const handleSelectFile: FormEventHandler<HTMLInputElement> = e => {\n    const { files } = e.target as any;\n    if (files.length) {\n      setError(null);\n      setLoading(true);\n      props\n        .dispatch(SnapshotActions.select(files[0]))\n        // .finally(() => setLoading(false))\n        .catch((err: Error) => {\n          setLoading(false);\n          setError(err);\n        });\n    }\n  };\n\n  return (\n    <>\n      <div className=\"snapshot-select-screen\">\n        <div className=\"bp3-non-ideal-state\">\n          <div className=\"bp3-non-ideal-state-visual\">\n            <img src={logo} className=\"logo\" />\n          </div>\n          <h4 className=\"bp3-heading\">痒痒熊</h4>\n          <div className=\"bp3-text-small bp3-text-muted\">\n            痒痒鼠超厉害的的小伙伴。\n          </div>\n          {error && (\n            <Callout title=\"打开快照失败\" intent=\"danger\">\n              {error.message}\n            </Callout>\n          )}\n          {loading ? (\n            <Spinner />\n          ) : (\n            <>\n              <FileInput\n                text=\"选择本地快照文件\"\n                onInputChange={handleSelectFile}\n                large\n              />\n              <Button minimal intent=\"primary\" onClick={() => setOpenCbg(true)}>\n                打开藏宝阁网址\n              </Button>\n            </>\n          )}\n        </div>\n      </div>\n      <OpenCbgUrl open={openCbg} onClose={() => setOpenCbg(false)} />\n    </>\n  );\n};\n\nexport const SnapshotSelectScreen = connect()(SnapshotSelectScreenImpl);\n","import React, { SFC, useEffect } from \"react\";\nimport \"./App.scss\";\nimport { connect } from \"react-redux\";\n\nimport { IYyxState } from \"../store\";\n\nimport { Main } from \"./Main/Main\";\nimport { SnapshotSelectScreen } from \"./Snapshot/SnapshotSelectScreen\";\n\nimport { SnapshotActions } from \"../modules/snapshot\";\nimport { ISnapshot } from \"../interfaces\";\nimport { Spinner } from \"@blueprintjs/core\";\n\nconst AppRender: SFC<{\n  snapshot: ISnapshot | null;\n  notSelected: boolean;\n  load: () => void;\n}> = props => {\n  useEffect(() => {\n    props.load();\n  }, []);\n\n  let main;\n\n  if (props.snapshot) {\n    main = <Main />;\n  } else {\n    if (props.notSelected) {\n      main = <SnapshotSelectScreen />;\n    } else {\n      main = (\n        <div style={{ marginTop: \"20%\" }}>\n          <Spinner />\n        </div>\n      );\n    }\n  }\n\n  return <>{main}</>;\n};\n\nconst App = connect(\n  (state: IYyxState) => {\n    return {\n      snapshot: state.snapshot.current,\n      notSelected: state.snapshot.currentNotSelected\n    };\n  },\n  dispatch => {\n    return {\n      load: () => dispatch(SnapshotActions.loadCurrent() as any)\n    };\n  }\n)(AppRender);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./styles/yyx.scss\";\n\nimport { Provider } from \"react-redux\";\nimport App from \"./components/App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { YyxStore } from \"./store\";\n\nconst container = document.getElementById(\"root\") as HTMLElement;\n\nReactDOM.render(\n  <Provider store={YyxStore}>\n    <App />\n  </Provider>,\n  container\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/logo.e6addb46.svg\";"],"sourceRoot":""}